var sharkViewer;(()=>{var e={8895:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.Z=void 0,r(1817),r(3948);var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}(r(1396));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=Object.freeze({INACTIVE:Symbol("INACTIVE"),INDETERMINATE:Symbol("INDETERMINATE"),ROTATING:Symbol("ROTATING"),DOLLYING:Symbol("DOLLYING"),PANNING:Symbol("PANNING")}),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=l(t);if(r){var o=l(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return s(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u(c(r=n.call(this)),"reset",(function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.update()})),u(c(r),"update",(function(){r.object.lookAt(r.target),r.state!==h.ROTATING&&r.fixUp(),r.dispatchEvent(r.changeEvent)})),u(c(r),"onMouseDown",(function(e){r.state=h.INDETERMINATE,r.prev=new o.Vector2(e.clientX,e.clientY),e.preventDefault(),r.domElement.focus?r.domElement.focus():window.focus(),document.addEventListener("mousemove",r.onMouseMove,!1),document.addEventListener("mouseup",r.onMouseUp,!1),r.domElement.addEventListener("contextmenu",r.onContextMenu,!1)})),u(c(r),"onMouseWheel",(function(e){e.preventDefault(),r.state=h.DOLLYING,r.prev=new o.Vector2(0,0),r.dolly(0,-e.deltaY)})),u(c(r),"onMouseMove",(function(e){switch(e.preventDefault(),e.buttons){case 1:e.altKey?r.pan(e.clientX,e.clientY):r.rotate(e.clientX,e.clientY);break;case 2:r.pan(e.clientX,e.clientY);break;case 4:r.dolly(e.clientX,e.clientY)}})),u(c(r),"onMouseUp",(function(){r.state===h.ROTATING&&r.fixUp(),r.clicked=r.state===h.INDETERMINATE,r.state=h.INACTIVE,document.removeEventListener("mousemove",r.onMouseMove,!1),document.removeEventListener("mouseup",r.onMouseUp,!1),r.domElement.removeEventListener("contextmenu",r.onContextMenu,!1)})),u(c(r),"onKeyDown",(function(e){var t,n,a=!1;switch(e.keyCode){case r.keys.UP:a=!0;var i=[0,r.keyPanSpeed];t=i[0],n=i[1];break;case r.keys.DOWN:a=!0,t=0,n=-r.keyPanSpeed;break;case r.keys.LEFT:a=!0;var s=[r.keyPanSpeed,0];t=s[0],n=s[1];break;case r.keys.RIGHT:a=!0,t=-r.keyPanSpeed,n=0}a&&(e.preventDefault(),r.state=h.PANNING,r.prev=new o.Vector2(0,0),r.pan(t,n))})),u(c(r),"onContextMenu",(function(e){e.preventDefault()})),u(c(r),"rotate",(function(e,t){var n=new o.Vector2(e,t);if(r.state===h.INDETERMINATE&&n.manhattanDistanceTo(r.prev)>2){r.state=h.ROTATING;var a=(new o.Vector3).subVectors(r.object.position,r.target);r.radius=a.length(),a.divideScalar(r.radius);var i=r.object.up,s=(new o.Vector3).crossVectors(i,a).normalize();r.basisMatrix=(new o.Matrix4).makeBasis(s,i,a);var c=(new o.Matrix4).makeTranslation(r.target.x,r.target.y,r.target.z);r.basisMatrix.premultiply(c)}if(r.state===h.ROTATING){var l=(new o.Vector2).subVectors(n,r.prev),u=2*r.rotateSpeed;l.multiplyScalar(u);var p=-l.x*(Math.PI/r.domElement.clientWidth),d=-l.y*(Math.PI/r.domElement.clientHeight)+Math.PI/2;d=Math.max(d,.01),d=Math.min(d,Math.PI-.01);var f=new o.Vector3;f.z=r.radius*Math.sin(d)*Math.cos(p),f.x=r.radius*Math.sin(d)*Math.sin(p),f.y=r.radius*Math.cos(d),f.applyMatrix4(r.basisMatrix),r.object.position.copy(f),r.update()}})),u(c(r),"dolly",(function(e,t){var n=new o.Vector2(e,t);if(r.state===h.INDETERMINATE&&n.manhattanDistanceTo(r.prev)>2&&(r.state=h.DOLLYING),r.state===h.DOLLYING){var a=(new o.Vector3).subVectors(r.target,r.object.position),i=a.length(),s=2*i,c=Math.min(r.maxDistance-r.minDistance,s)/r.domElement.clientHeight,l=r.zoomSpeed*c*(r.prev.y-t);if(r.minDistance<=i+l&&i+l<=r.maxDistance){var u=a.multiplyScalar(l/i);r.object.position.sub(u),r.update(),r.prev=n}}})),u(c(r),"pan",(function(e,t){var n=new o.Vector2(e,t);if(r.state===h.INDETERMINATE&&n.manhattanDistanceTo(r.prev)>2&&(r.state=h.PANNING),r.state===h.PANNING){var a=(new o.Vector3).subVectors(r.target,r.object.position),i=a.length();a.divideScalar(i);var s=r.object.up.clone(),c=(new o.Vector3).crossVectors(s,a).normalize(),l=Math.tan(r.object.fov/2*(Math.PI/360))*i/(r.domElement.clientHeight/2),u=(new o.Vector2).subVectors(n,r.prev),p=c.multiplyScalar(u.x*l),d=s.multiplyScalar(u.y*l);r.object.position.add(p),r.object.position.add(d);var f=a.multiplyScalar(i),v=(new o.Vector3).addVectors(r.object.position,f);r.target=v,r.update(),r.prev=n}})),u(c(r),"fixUp",(function(){var e=(new o.Vector3).subVectors(r.target,r.object.position).normalize(),t=(new o.Vector3).crossVectors(e,r.object.up).normalize(),n=(new o.Vector3).crossVectors(t,e).normalize();r.object.up.copy(n)})),r.object=e,r.domElement=t,r.keyPanSpeed=7,r.keys={LEFT:37,UP:38,RIGHT:39,DOWN:40},r.maxDistance=1/0,r.minDistance=0,r.rotateSpeed=1,r.target=new o.Vector3,r.zoomSpeed=1,r.clicked=!1,r.state=h.INACTIVE,r.changeEvent={type:"change"},r.domElement.addEventListener("mousedown",r.onMouseDown,!1),r.domElement.addEventListener("wheel",r.onMouseWheel,!1),r.domElement.addEventListener("keydown",r.onKeyDown,!1),-1===r.domElement.tabIndex&&(r.domElement.tabIndex=0),r.target0=r.target.clone(),r.position0=r.object.position.clone(),r.update(),r}return a}(o.EventDispatcher);t.Z=p},6077:(e,t,r)=>{var n=r(111);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},1223:(e,t,r)=>{var n=r(5112),o=r(30),a=r(3070),i=n("unscopables"),s=Array.prototype;null==s[i]&&a.f(s,i,{configurable:!0,value:o(null)}),e.exports=function(e){s[i][e]=!0}},9670:(e,t,r)=>{var n=r(111);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},1318:(e,t,r)=>{var n=r(5656),o=r(7466),a=r(1400),i=function(e){return function(t,r,i){var s,c=n(t),l=o(c.length),u=a(i,l);if(e&&r!=r){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===r)return e||u||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},4326:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},9920:(e,t,r)=>{var n=r(6656),o=r(3887),a=r(1236),i=r(3070);e.exports=function(e,t){for(var r=o(t),s=i.f,c=a.f,l=0;l<r.length;l++){var u=r[l];n(e,u)||s(e,u,c(t,u))}}},8544:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4994:(e,t,r)=>{"use strict";var n=r(3383).IteratorPrototype,o=r(30),a=r(9114),i=r(8003),s=r(7497),c=function(){return this};e.exports=function(e,t,r){var l=t+" Iterator";return e.prototype=o(n,{next:a(1,r)}),i(e,l,!1,!0),s[l]=c,e}},8880:(e,t,r)=>{var n=r(9781),o=r(3070),a=r(9114);e.exports=n?function(e,t,r){return o.f(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},654:(e,t,r)=>{"use strict";var n=r(2109),o=r(4994),a=r(9518),i=r(7674),s=r(8003),c=r(8880),l=r(1320),u=r(5112),h=r(1913),p=r(7497),d=r(3383),f=d.IteratorPrototype,v=d.BUGGY_SAFARI_ITERATORS,m=u("iterator"),y="keys",g="values",x="entries",b=function(){return this};e.exports=function(e,t,r,u,d,w,C){o(r,t,u);var A,S,M,j=function(e){if(e===d&&E)return E;if(!v&&e in L)return L[e];switch(e){case y:case g:case x:return function(){return new r(this,e)}}return function(){return new r(this)}},z=t+" Iterator",O=!1,L=e.prototype,F=L[m]||L["@@iterator"]||d&&L[d],E=!v&&F||j(d),P="Array"==t&&L.entries||F;if(P&&(A=a(P.call(new e)),f!==Object.prototype&&A.next&&(h||a(A)===f||(i?i(A,f):"function"!=typeof A[m]&&c(A,m,b)),s(A,z,!0,!0),h&&(p[z]=b))),d==g&&F&&F.name!==g&&(O=!0,E=function(){return F.call(this)}),h&&!C||L[m]===E||c(L,m,E),p[t]=E,d)if(S={values:j(g),keys:w?E:j(y),entries:j(x)},C)for(M in S)(v||O||!(M in L))&&l(L,M,S[M]);else n({target:t,proto:!0,forced:v||O},S);return S}},9781:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(e,t,r)=>{var n=r(7854),o=r(111),a=n.document,i=o(a)&&o(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},8324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:(e,t,r)=>{var n=r(5005);e.exports=n("navigator","userAgent")||""},7392:(e,t,r)=>{var n,o,a=r(7854),i=r(8113),s=a.process,c=s&&s.versions,l=c&&c.v8;l?o=(n=l.split("."))[0]<4?1:n[0]+n[1]:i&&(!(n=i.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=i.match(/Chrome\/(\d+)/))&&(o=n[1]),e.exports=o&&+o},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(e,t,r)=>{var n=r(7854),o=r(1236).f,a=r(8880),i=r(1320),s=r(3505),c=r(9920),l=r(4705);e.exports=function(e,t){var r,u,h,p,d,f=e.target,v=e.global,m=e.stat;if(r=v?n:m?n[f]||s(f,{}):(n[f]||{}).prototype)for(u in t){if(p=t[u],h=e.noTargetGet?(d=o(r,u))&&d.value:r[u],!l(v?u:f+(m?".":"#")+u,e.forced)&&void 0!==h){if(typeof p==typeof h)continue;c(p,h)}(e.sham||h&&h.sham)&&a(p,"sham",!0),i(r,u,p,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},5005:(e,t,r)=>{var n=r(857),o=r(7854),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(n[e])||a(o[e]):n[e]&&n[e][t]||o[e]&&o[e][t]}},7854:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},6656:(e,t,r)=>{var n=r(7908),o={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return o.call(n(e),t)}},3501:e=>{e.exports={}},490:(e,t,r)=>{var n=r(5005);e.exports=n("document","documentElement")},4664:(e,t,r)=>{var n=r(9781),o=r(7293),a=r(317);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},8361:(e,t,r)=>{var n=r(7293),o=r(4326),a="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a.call(e,""):Object(e)}:Object},2788:(e,t,r)=>{var n=r(5465),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),e.exports=n.inspectSource},9909:(e,t,r)=>{var n,o,a,i=r(8536),s=r(7854),c=r(111),l=r(8880),u=r(6656),h=r(5465),p=r(6200),d=r(3501),f="Object already initialized",v=s.WeakMap;if(i||h.state){var m=h.state||(h.state=new v),y=m.get,g=m.has,x=m.set;n=function(e,t){if(g.call(m,e))throw new TypeError(f);return t.facade=e,x.call(m,e,t),t},o=function(e){return y.call(m,e)||{}},a=function(e){return g.call(m,e)}}else{var b=p("state");d[b]=!0,n=function(e,t){if(u(e,b))throw new TypeError(f);return t.facade=e,l(e,b,t),t},o=function(e){return u(e,b)?e[b]:{}},a=function(e){return u(e,b)}}e.exports={set:n,get:o,has:a,enforce:function(e){return a(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},4705:(e,t,r)=>{var n=r(7293),o=/#|\.prototype\./,a=function(e,t){var r=s[i(e)];return r==l||r!=c&&("function"==typeof t?n(t):!!t)},i=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},111:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},1913:e=>{e.exports=!1},3383:(e,t,r)=>{"use strict";var n,o,a,i=r(7293),s=r(9518),c=r(8880),l=r(6656),u=r(5112),h=r(1913),p=u("iterator"),d=!1;[].keys&&("next"in(a=[].keys())?(o=s(s(a)))!==Object.prototype&&(n=o):d=!0);var f=null==n||i((function(){var e={};return n[p].call(e)!==e}));f&&(n={}),h&&!f||l(n,p)||c(n,p,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},7497:e=>{e.exports={}},133:(e,t,r)=>{var n=r(7392),o=r(7293);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8536:(e,t,r)=>{var n=r(7854),o=r(2788),a=n.WeakMap;e.exports="function"==typeof a&&/native code/.test(o(a))},30:(e,t,r)=>{var n,o=r(9670),a=r(6048),i=r(748),s=r(3501),c=r(490),l=r(317),u=r(6200),h="prototype",p="script",d=u("IE_PROTO"),f=function(){},v=function(e){return"<"+p+">"+e+"</"+p+">"},m=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t,r;m=n?function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):(t=l("iframe"),r="java"+p+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(v("document.F=Object")),e.close(),e.F);for(var o=i.length;o--;)delete m[h][i[o]];return m()};s[d]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[h]=o(e),r=new f,f[h]=null,r[d]=e):r=m(),void 0===t?r:a(r,t)}},6048:(e,t,r)=>{var n=r(9781),o=r(3070),a=r(9670),i=r(1956);e.exports=n?Object.defineProperties:function(e,t){a(e);for(var r,n=i(t),s=n.length,c=0;s>c;)o.f(e,r=n[c++],t[r]);return e}},3070:(e,t,r)=>{var n=r(9781),o=r(4664),a=r(9670),i=r(7593),s=Object.defineProperty;t.f=n?s:function(e,t,r){if(a(e),t=i(t,!0),a(r),o)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},1236:(e,t,r)=>{var n=r(9781),o=r(5296),a=r(9114),i=r(5656),s=r(7593),c=r(6656),l=r(4664),u=Object.getOwnPropertyDescriptor;t.f=n?u:function(e,t){if(e=i(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return a(!o.f.call(e,t),e[t])}},8006:(e,t,r)=>{var n=r(6324),o=r(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},9518:(e,t,r)=>{var n=r(6656),o=r(7908),a=r(6200),i=r(8544),s=a("IE_PROTO"),c=Object.prototype;e.exports=i?Object.getPrototypeOf:function(e){return e=o(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},6324:(e,t,r)=>{var n=r(6656),o=r(5656),a=r(1318).indexOf,i=r(3501);e.exports=function(e,t){var r,s=o(e),c=0,l=[];for(r in s)!n(i,r)&&n(s,r)&&l.push(r);for(;t.length>c;)n(s,r=t[c++])&&(~a(l,r)||l.push(r));return l}},1956:(e,t,r)=>{var n=r(6324),o=r(748);e.exports=Object.keys||function(e){return n(e,o)}},5296:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},7674:(e,t,r)=>{var n=r(9670),o=r(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,a){return n(r),o(a),t?e.call(r,a):r.__proto__=a,r}}():void 0)},3887:(e,t,r)=>{var n=r(5005),o=r(8006),a=r(5181),i=r(9670);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(i(e)),r=a.f;return r?t.concat(r(e)):t}},857:(e,t,r)=>{var n=r(7854);e.exports=n},1320:(e,t,r)=>{var n=r(7854),o=r(8880),a=r(6656),i=r(3505),s=r(2788),c=r(9909),l=c.get,u=c.enforce,h=String(String).split("String");(e.exports=function(e,t,r,s){var c,l=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof t||a(r,"name")||o(r,"name",t),(c=u(r)).source||(c.source=h.join("string"==typeof t?t:""))),e!==n?(l?!d&&e[t]&&(p=!0):delete e[t],p?e[t]=r:o(e,t,r)):p?e[t]=r:i(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},4488:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:(e,t,r)=>{var n=r(7854),o=r(8880);e.exports=function(e,t){try{o(n,e,t)}catch(r){n[e]=t}return t}},8003:(e,t,r)=>{var n=r(3070).f,o=r(6656),a=r(5112)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},6200:(e,t,r)=>{var n=r(2309),o=r(9711),a=n("keys");e.exports=function(e){return a[e]||(a[e]=o(e))}},5465:(e,t,r)=>{var n=r(7854),o=r(3505),a="__core-js_shared__",i=n[a]||o(a,{});e.exports=i},2309:(e,t,r)=>{var n=r(1913),o=r(5465);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.13.1",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},1400:(e,t,r)=>{var n=r(9958),o=Math.max,a=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):a(r,t)}},5656:(e,t,r)=>{var n=r(8361),o=r(4488);e.exports=function(e){return n(o(e))}},9958:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},7466:(e,t,r)=>{var n=r(9958),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},7908:(e,t,r)=>{var n=r(4488);e.exports=function(e){return Object(n(e))}},7593:(e,t,r)=>{var n=r(111);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},9711:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},3307:(e,t,r)=>{var n=r(133);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:(e,t,r)=>{var n=r(7854),o=r(2309),a=r(6656),i=r(9711),s=r(133),c=r(3307),l=o("wks"),u=n.Symbol,h=c?u:u&&u.withoutSetter||i;e.exports=function(e){return a(l,e)&&(s||"string"==typeof l[e])||(s&&a(u,e)?l[e]=u[e]:l[e]=h("Symbol."+e)),l[e]}},6992:(e,t,r)=>{"use strict";var n=r(5656),o=r(1223),a=r(7497),i=r(9909),s=r(654),c="Array Iterator",l=i.set,u=i.getterFor(c);e.exports=s(Array,"Array",(function(e,t){l(this,{type:c,target:n(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},1817:(e,t,r)=>{"use strict";var n=r(2109),o=r(9781),a=r(7854),i=r(6656),s=r(111),c=r(3070).f,l=r(9920),u=a.Symbol;if(o&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var h={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new u(e):void 0===e?u():u(e);return""===e&&(h[t]=!0),t};l(p,u);var d=p.prototype=u.prototype;d.constructor=p;var f=d.toString,v="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;c(d,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=f.call(e);if(i(h,e))return"";var r=v?t.slice(7,-1):t.replace(m,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:p})}},3948:(e,t,r)=>{var n=r(7854),o=r(8324),a=r(6992),i=r(8880),s=r(5112),c=s("iterator"),l=s("toStringTag"),u=a.values;for(var h in o){var p=n[h],d=p&&p.prototype;if(d){if(d[c]!==u)try{i(d,c,u)}catch(e){d[c]=u}if(d[l]||i(d,l,h),o[h])for(var f in a)if(d[f]!==a[f])try{i(d,f,a[f])}catch(e){d[f]=a[f]}}}},3466:function(e){var t;e.exports=((t=function(){function e(e){return o.appendChild(e.dom),e}function r(e){for(var t=0;t<o.children.length;t++)o.children[t].style.display=t===e?"block":"none";n=e}var n=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",(function(e){e.preventDefault(),r(++n%o.children.length)}),!1);var a=(performance||Date).now(),i=a,s=0,c=e(new t.Panel("FPS","#0ff","#002")),l=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:e,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(l.update(e-a,200),e>i+1e3&&(c.update(1e3*s/(e-i),100),i=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:o,setMode:r}}).Panel=function(e,t,r){var n=1/0,o=0,a=Math.round,i=a(window.devicePixelRatio||1),s=80*i,c=48*i,l=3*i,u=2*i,h=3*i,p=15*i,d=74*i,f=30*i,v=document.createElement("canvas");v.width=s,v.height=c,v.style.cssText="width:80px;height:48px";var m=v.getContext("2d");return m.font="bold "+9*i+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=r,m.fillRect(0,0,s,c),m.fillStyle=t,m.fillText(e,l,u),m.fillRect(h,p,d,f),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(h,p,d,f),{dom:v,update:function(c,y){n=Math.min(n,c),o=Math.max(o,c),m.fillStyle=r,m.globalAlpha=1,m.fillRect(0,0,s,p),m.fillStyle=t,m.fillText(a(c)+" "+e+" ("+a(n)+"-"+a(o)+")",l,u),m.drawImage(v,h+i,p,d-i,f,h,p,d-i,f),m.fillRect(h+d-i,p,i,f),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(h+d-i,p,i,a((1-c/y)*f))}}},t)},3683:e=>{"use strict";function t(e){throw new Error(e)}e.exports=function(e){e.OBJLoader=function(t){this.manager=void 0!==t?t:e.DefaultLoadingManager,this.materials=null,this.regexp={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}},e.OBJLoader.prototype={constructor:e.OBJLoader,load:function(r,n,o,a){var i=this;this.onError=a||t;var s=new e.FileLoader(i.manager);s.setPath(this.path),s.load(r,(function(e){n(i.parse(e))}),o,a)},setPath:function(e){this.path=e},setMaterials:function(e){this.materials=e},_createParserState:function(){var e={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var n=r.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){var n=this.vertices,o=this.object.geometry.vertices;o.push(n[e+0]),o.push(n[e+1]),o.push(n[e+2]),o.push(n[t+0]),o.push(n[t+1]),o.push(n[t+2]),o.push(n[r+0]),o.push(n[r+1]),o.push(n[r+2])},addVertexLine:function(e){var t=this.vertices,r=this.object.geometry.vertices;r.push(t[e+0]),r.push(t[e+1]),r.push(t[e+2])},addNormal:function(e,t,r){var n=this.normals,o=this.object.geometry.normals;o.push(n[e+0]),o.push(n[e+1]),o.push(n[e+2]),o.push(n[t+0]),o.push(n[t+1]),o.push(n[t+2]),o.push(n[r+0]),o.push(n[r+1]),o.push(n[r+2])},addUV:function(e,t,r){var n=this.uvs,o=this.object.geometry.uvs;o.push(n[e+0]),o.push(n[e+1]),o.push(n[t+0]),o.push(n[t+1]),o.push(n[r+0]),o.push(n[r+1])},addUVLine:function(e){var t=this.uvs,r=this.object.geometry.uvs;r.push(t[e+0]),r.push(t[e+1])},addFace:function(e,t,r,n,o,a,i,s,c,l,u,h){var p,d=this.vertices.length,f=this.parseVertexIndex(e,d),v=this.parseVertexIndex(t,d),m=this.parseVertexIndex(r,d);if(void 0===n?this.addVertex(f,v,m):(p=this.parseVertexIndex(n,d),this.addVertex(f,v,p),this.addVertex(v,m,p)),void 0!==o){var y=this.uvs.length;f=this.parseUVIndex(o,y),v=this.parseUVIndex(a,y),m=this.parseUVIndex(i,y),void 0===n?this.addUV(f,v,m):(p=this.parseUVIndex(s,y),this.addUV(f,v,p),this.addUV(v,m,p))}if(void 0!==c){var g=this.normals.length;f=this.parseNormalIndex(c,g),v=c===l?f:this.parseNormalIndex(l,g),m=c===u?f:this.parseNormalIndex(u,g),void 0===n?this.addNormal(f,v,m):(p=this.parseNormalIndex(h,g),this.addNormal(f,v,p),this.addNormal(v,m,p))}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,n=this.uvs.length,o=0,a=e.length;o<a;o++)this.addVertexLine(this.parseVertexIndex(e[o],r));var i=0;for(a=t.length;i<a;i++)this.addUVLine(this.parseUVIndex(t[i],n))}};return e.startObject("",!1),e},parse:function(t,r){void 0===r&&(r=!0),r&&console.time("OBJLoader");var n=this._createParserState();-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var o=t.split("\n"),a="",i="",s="",c=[],l="function"==typeof"".trimLeft,u=0,h=o.length;u<h;u++)if(a=o[u],0!==(a=l?a.trimLeft():a.trim()).length&&"#"!==(i=a.charAt(0)))if("v"===i)" "===(s=a.charAt(1))&&null!==(c=this.regexp.vertex_pattern.exec(a))?n.vertices.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])):"n"===s&&null!==(c=this.regexp.normal_pattern.exec(a))?n.normals.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])):"t"===s&&null!==(c=this.regexp.uv_pattern.exec(a))?n.uvs.push(parseFloat(c[1]),parseFloat(c[2])):this.onError("Unexpected vertex/normal/uv line: '"+a+"'");else if("f"===i)null!==(c=this.regexp.face_vertex_uv_normal.exec(a))?n.addFace(c[1],c[4],c[7],c[10],c[2],c[5],c[8],c[11],c[3],c[6],c[9],c[12]):null!==(c=this.regexp.face_vertex_uv.exec(a))?n.addFace(c[1],c[3],c[5],c[7],c[2],c[4],c[6],c[8]):null!==(c=this.regexp.face_vertex_normal.exec(a))?n.addFace(c[1],c[3],c[5],c[7],void 0,void 0,void 0,void 0,c[2],c[4],c[6],c[8]):null!==(c=this.regexp.face_vertex.exec(a))?n.addFace(c[1],c[2],c[3],c[4]):this.onError("Unexpected face line: '"+a+"'");else if("l"===i){var p=a.substring(1).trim().split(" "),d=[],f=[];if(-1===a.indexOf("/"))d=p;else for(var v=0,m=p.length;v<m;v++){var y=p[v].split("/");""!==y[0]&&d.push(y[0]),""!==y[1]&&f.push(y[1])}n.addLineGeometry(d,f)}else if(null!==(c=this.regexp.object_pattern.exec(a))){var g=(" "+c[0].substr(1).trim()).substr(1);n.startObject(g)}else if(this.regexp.material_use_pattern.test(a))n.object.startMaterial(a.substring(7).trim(),n.materialLibraries);else if(this.regexp.material_library_pattern.test(a))n.materialLibraries.push(a.substring(7).trim());else if(null!==(c=this.regexp.smoothing_pattern.exec(a))){var x=c[1].trim().toLowerCase();n.object.smooth="1"===x||"on"===x,(E=n.object.currentMaterial())&&(E.smooth=n.object.smooth)}else{if("\0"===a)continue;this.onError("Unexpected line: '"+a+"'")}n.finalize();var b=new e.Group;for(b.materialLibraries=[].concat(n.materialLibraries),u=0,h=n.objects.length;u<h;u++){var w=n.objects[u],C=w.geometry,A=w.materials,S="Line"===C.type;if(0!==C.vertices.length){var M=new e.BufferGeometry;M.addAttribute("position",new e.BufferAttribute(new Float32Array(C.vertices),3)),C.normals.length>0?M.addAttribute("normal",new e.BufferAttribute(new Float32Array(C.normals),3)):M.computeVertexNormals(),C.uvs.length>0&&M.addAttribute("uv",new e.BufferAttribute(new Float32Array(C.uvs),2));for(var j,z=[],O=0,L=A.length;O<L;O++){var F=A[O],E=void 0;if(null!==this.materials&&(E=this.materials.create(F.name),S&&E&&!(E instanceof e.LineBasicMaterial))){var P=new e.LineBasicMaterial;P.copy(E),E=P}E||((E=S?new e.LineBasicMaterial:new e.MeshPhongMaterial).name=F.name),E.shading=F.smooth?e.SmoothShading:e.FlatShading,z.push(E)}if(z.length>1){for(O=0,L=A.length;O<L;O++)F=A[O],M.addGroup(F.groupStart,F.groupCount,O);var D=new e.MultiMaterial(z);j=S?new e.LineSegments(M,D):new e.Mesh(M,D)}else j=S?new e.LineSegments(M,z[0]):new e.Mesh(M,z[0]);j.name=w.name,b.add(j)}}return r&&console.timeEnd("OBJLoader"),b}}}},1396:e=>{"use strict";e.exports=THREE}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";function e(e){const t=e.split("\n"),r={},n="[+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d+)?(?:[eE][+\\-]?\\d+)?",o=new RegExp("^[ \\t]*("+["\\d+","\\d+",n,n,n,n,"-1|\\d+"].join(")[ \\t]+(")+")[ \\t]*$","m");return t.forEach((e=>{const t=e.match(o);if(t){const e=parseInt(t[1],10);r[e]={id:e,type:parseInt(t[2],10),x:parseFloat(t[3]),y:parseFloat(t[4]),z:parseFloat(t[5]),radius:parseFloat(t[6]),parent:parseInt(t[7],10)}}})),r}r.r(n),r.d(n,{default:()=>f,swcParser:()=>e});const t=r(1396);r(3683)(t);const o=r(3466),a=r(8895).Z,i=["uniform float particleScale;","attribute float radius;","attribute vec3 typeColor;","varying vec3 vColor;","varying vec4 mvPosition;","varying float vRadius;","void main() ","{","vColor = vec3(typeColor); // set RGB color associated to vertex; use later in fragment shader.","mvPosition = modelViewMatrix * vec4(position, 1.0);","// gl_PointSize = size;","gl_PointSize = radius * ((particleScale*2.0) / length(mvPosition.z));","gl_Position = projectionMatrix * mvPosition;","vRadius = radius;","}"].join("\n"),s=["uniform sampler2D sphereTexture; // Imposter image of sphere","uniform mat4 projectionMatrix;","varying vec3 vColor; // colors associated to vertices; assigned by vertex shader","varying vec4 mvPosition;","varying float vRadius;","void main() ","{","// what part of the sphere image?","vec2 uv = vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y);","vec4 sphereColors = texture2D(sphereTexture, uv);","// avoid further computation at invisible corners","if (sphereColors.a < 0.3) discard;","// calculates a color for the particle","// gl_FragColor = vec4(vColor, 1.0);","// sets a white particle texture to desired color","// gl_FragColor = sqrt(gl_FragColor * texture2D(sphereTexture, uv)) + vec4(0.1, 0.1, 0.1, 0.0);","// red channel contains colorizable sphere image","vec3 baseColor = vColor * sphereColors.r;","// green channel contains (white?) specular highlight","vec3 highlightColor = baseColor + sphereColors.ggg;","gl_FragColor = vec4(highlightColor, sphereColors.a);","// TODO blue channel contains depth offset, but we cannot use gl_FragDepth in webgl?","#ifdef GL_EXT_frag_depth","float far = gl_DepthRange.far; float near = gl_DepthRange.near;","float dz = sphereColors.b * vRadius;","vec4 clipPos = projectionMatrix * (mvPosition + vec4(0, 0, dz, 0));","float ndc_depth = clipPos.z/clipPos.w;","float depth = (((far-near) * ndc_depth) + near + far) / 2.0;","gl_FragDepthEXT = depth;","#endif","}"].join("\n"),c=(["uniform sampler2D sphereTexture; // Imposter image of sphere","uniform mat4 projectionMatrix;","varying vec3 vColor; // colors associated to vertices; assigned by vertex shader","varying vec4 mvPosition;","varying float vRadius;","void main() ","{","// what part of the sphere image?","vec2 uv = vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y);","vec4 sphereColors = texture2D(sphereTexture, uv);","// avoid further computation at invisible corners","if (sphereColors.a < 0.3) discard;","// calculates a color for the particle","// gl_FragColor = vec4(vColor, 1.0);","// sets a white particle texture to desired color","// gl_FragColor = sqrt(gl_FragColor * texture2D(sphereTexture, uv)) + vec4(0.1, 0.1, 0.1, 0.0);","// red channel contains colorizable sphere image","vec3 baseColor = vColor * sphereColors.r;","// green channel contains (white?) specular highlight","gl_FragColor = vec4(baseColor, sphereColors.a);","// TODO blue channel contains depth offset, but we cannot use gl_FragDepth in webgl?","#ifdef GL_EXT_frag_depth","float far = gl_DepthRange.far; float near = gl_DepthRange.near;","float dz = sphereColors.b * vRadius;","vec4 clipPos = projectionMatrix * (mvPosition + vec4(0, 0, dz, 0));","float ndc_depth = clipPos.z/clipPos.w;","float depth = (((far-near) * ndc_depth) + near + far) / 2.0;","gl_FragDepthEXT = depth;","#endif","}"].join("\n"),["attribute float radius;","attribute vec3 typeColor;","varying vec3 vColor;","varying vec2 sphereUv;","varying vec4 mvPosition;","varying float depthScale;","void main() ","{","\t// TODO - offset cone position for different sphere sizes","\t// TODO - implement depth buffer on Chrome","\tmvPosition = modelViewMatrix * vec4(position, 1.0);","\t// Expand quadrilateral perpendicular to both view/screen direction and cone axis","\tvec3 cylAxis = (modelViewMatrix * vec4(normal, 0.0)).xyz; // convert cone axis to camera space","\tvec3 sideDir = normalize(cross(vec3(0.0,0.0,-1.0), cylAxis));","\tmvPosition += vec4(radius * sideDir, 0.0);","\tgl_Position = projectionMatrix * mvPosition;","\t// Pass and interpolate color","\tvColor = typeColor;","\t// Texture coordinates","\tsphereUv = uv - vec2(0.5, 0.5); // map from [0,1] range to [-.5,.5], before rotation",'\t// If sideDir is "up" on screen, make sure u is positive',"\tfloat q = sideDir.y * sphereUv.y;","\tsphereUv.y = sign(q) * sphereUv.y;","\t// rotate texture coordinates to match cone orientation about z","\tfloat angle = atan(sideDir.x/sideDir.y);","\tfloat c = cos(angle);","\tfloat s = sin(angle);","\tmat2 rotMat = mat2(","\t\tc, -s, ","\t\ts,  c);","\tsphereUv = rotMat * sphereUv;","\tsphereUv += vec2(0.5, 0.5); // map back from [-.5,.5] => [0,1]","\t// We are painting an angled cone onto a flat quad, so depth correction is complicated","   float foreshortening = length(cylAxis) / length(cylAxis.xy); // correct depth for foreshortening","   // foreshortening limit is a tradeoff between overextruded cone artifacts, and depth artifacts","   if (foreshortening > 4.0) foreshortening = 0.9; // hack to not pop out at extreme angles...","   depthScale = radius * foreshortening; // correct depth for foreshortening","}"].join("\n")),l=["uniform sampler2D sphereTexture; // Imposter image of sphere","uniform mat4 projectionMatrix;","varying vec3 vColor;","varying vec2 sphereUv;","varying vec4 mvPosition;","varying float depthScale;","void main() ","{","\tvec4 sphereColors = texture2D(sphereTexture, sphereUv);","\tif (sphereColors.a < 0.3) discard;","\tvec3 baseColor = vColor * sphereColors.r;","\tvec3 highlightColor = baseColor + sphereColors.ggg;","\tgl_FragColor = vec4(highlightColor, sphereColors.a);","#ifdef GL_EXT_frag_depth","float dz = sphereColors.b * depthScale;","vec4 mvp = mvPosition + vec4(0, 0, dz, 0);","vec4 clipPos = projectionMatrix * mvp;","float ndc_depth = clipPos.z/clipPos.w;","float far = gl_DepthRange.far; float near = gl_DepthRange.near;","float depth = (((far-near) * ndc_depth) + near + far) / 2.0;","gl_FragDepthEXT = depth;","#endif","}"].join("\n");function u(e){const t={xmin:1/0,xmax:-1/0,ymin:1/0,ymax:-1/0,zmin:1/0,zmax:-1/0};return Object.values(e).forEach((e=>{const r=e.radius;e.x-r<t.xmin&&(t.xmin=e.x-r),e.x+r>t.xmax&&(t.xmax=e.x+r),e.y-r<t.ymin&&(t.ymin=e.y-r),e.y+r>t.ymax&&(t.ymax=e.y+r),e.z-r<t.zmin&&(t.zmin=e.z-r),e.z+r>t.zmax&&(t.zmax=e.z+r)})),t}function h(e,r){const n=(r.xmax-r.xmin)/2,o=(r.ymax-r.ymin)/2,a=(r.zmax-r.zmin)/2;let i=Math.min(n,o,a),s=new t.Vector3(r.xmin+n,r.ymin+o,r.zmin+a),c=i*i;return Object.values(e).forEach((e=>{const r=new t.Vector3(e.x,e.y,e.z),n=new t.Vector3;n.subVectors(s,r);const o=n.dot(n);if(o+e.radius*e.radius>c){const t=Math.sqrt(o),a=(i+(t+e.radius))/2,l=n.clone().divideScalar(t).clone().multiplyScalar(a-e.radius);s=r.clone().add(l),i=a,c=i*i}})),{center:s,radius:i}}function p(e,r,n,o){const a=e*(Math.PI/180)/2,i=r.radius/Math.sin(a),{center:s}=r,c=Math.max(-o/2,n?s.z-i:s.z+i);return new t.Vector3(s.x,s.y,c)}function d(e,r){return e.traverse((e=>{e.material=new t.ShaderMaterial({uniforms:{color:{type:"c",value:new t.Color(`${r}`)}},vertexShader:"\n        #line 585\n        varying vec3 normal_in_camera;\n        varying vec3 view_direction;\n\n        void main() {\n          vec4 pos_in_camera = modelViewMatrix * vec4(position, 1.0);\n          gl_Position = projectionMatrix * pos_in_camera;\n          normal_in_camera = normalize(mat3(modelViewMatrix) * normal);\n          view_direction = normalize(pos_in_camera.xyz);\n        }\n      ",fragmentShader:"\n        #line 597\n        uniform vec3 color;\n        varying vec3 normal_in_camera;\n        varying vec3 view_direction;\n\n        void main() {\n          // Make edges more opaque than center\n          float edginess = 1.0 - abs(dot(normal_in_camera, view_direction));\n          float opacity = clamp(edginess - 0.30, 0.0, 0.5);\n          // Darken compartment at the very edge\n          float blackness = pow(edginess, 4.0) - 0.3;\n          vec3 c = mix(color, vec3(0,0,0), blackness);\n          gl_FragColor = vec4(c, opacity);\n        }\n      ",transparent:!0,depthTest:!0,depthWrite:!1,side:t.DoubleSide})})),e}class f{constructor(e){this.swc=null,this.mode="particle",this.flip=!1,this.colors=[3276764,7163891,11156208,15958066,5897248,16307260,16591949,13224393],this.radius_scale_factor=1,this.metadata=!1,this.on_select_node=null,this.on_toggle_node=null,this.showStats=!1,this.animated=!1,this.three=t,this.showAxes=!1,this.show_cones=!0,this.brainboundingbox=null,this.last_anim_timestamp=null,this.mouseHandler=null,this.nodeParticleTexture="data:image/png;base64,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",this.min_radius=null,this.raycaster=new t.Raycaster,this.trackControls=null,this.backgroundColor=16777215,this.renderer=null,this.camera=null,this.cameraChangeCallback=null,this.onTop=!1,this.maxVolumeSize=1e5,this.setValues(e),"object"==typeof e.dom_element?this.dom_element=e.dom_element:this.dom_element=document.getElementById(e.dom_element||"container"),this.HEIGHT=this.dom_element.clientHeight,this.WIDTH=this.dom_element.clientWidth}setValues(e){void 0!==e&&Object.keys(e).forEach((t=>{const r=e[t];void 0!==r&&t in this&&(this[t]=r)}))}nodeColor(e){return e.type<this.three_colors.length?this.three_colors[e.type]:this.three_colors[0]}generateSphere(e){const r=this.three_materials[e.type],n=e.radius||.01,o=new t.SphereGeometry(n),a=new t.Mesh(o,r);return a.position.x=e.x,a.position.y=e.y,a.position.z=e.z,a}generateConeGeometry(e,r){const n=this.three_materials[r.type],o=new t.Vector3(e.x,e.y,e.z),a=new t.Vector3(r.x,r.y,r.z),i=o.distanceTo(a),s=(new t.Vector3).subVectors(o,a);s.normalize();const c=Math.acos(s.y),l=new t.Vector3;l.crossVectors(s,new t.Vector3(0,1,0)),l.normalize();const u=e.radius||.01,h=r.radius||.01,p=new t.CylinderGeometry(u,h,i),d=new t.Mesh(p,n);d.matrixAutoUpdate=!1,d.matrix.makeRotationAxis(l,-c);const f=new t.Vector3((e.x+r.x)/2,(e.y+r.y)/2,(e.z+r.z)/2);return d.matrix.setPosition(f),d}generateCone(e,r,n){const o={},a={};let i=this.nodeColor(e);n&&(i=new t.Color(n)),o.vertex=new t.Vector3(e.x,e.y,e.z),o.radius=e.radius,o.color=i;let s=this.nodeColor(r);n&&(s=new t.Color(n)),a.vertex=new t.Vector3(r.x,r.y,r.z),a.radius=r.radius,a.color=s;const c=(new t.Vector3).subVectors(a.vertex,o.vertex),l=c.clone().negate();return{child:o,parent:a,normal1:c,normal2:l}}createNeuron(e,r){const n=new t.Object3D;let o,a;if("particle"===this.mode){const u=document.createElement("img"),h=new t.Texture(u);u.onload=function(){h.needsUpdate=!0},u.src=this.nodeParticleTexture,o=new t.BufferGeometry;const p=.5*this.HEIGHT/this.renderer.getPixelRatio()/Math.tan(.5*this.fov*Math.PI/180),d={radius:{type:"fv1",value:[]},typeColor:{type:"c",value:[]},vertices:{type:"f",value:[]}},f={particleScale:{type:"f",value:p},sphereTexture:{type:"t",value:h}},v={};Object.keys(e).forEach((n=>{let o=this.nodeColor(e[n]);r&&(o=new t.Color(r));const a=function(e){return new t.Vector3(e.x,e.y,e.z)}(e[n]);let i=e[n].radius*this.radius_scale_factor;this.min_radius&&i<this.min_radius&&(i=this.min_radius),d.radius.value.push(i),d.typeColor.value.push(o.r),d.typeColor.value.push(o.g),d.typeColor.value.push(o.b),d.vertices.value.push(a.x),d.vertices.value.push(a.y),d.vertices.value.push(a.z),v[d.radius.value.length-1]=e[n].sampleNumber})),o.setAttribute("position",new t.Float32BufferAttribute(d.vertices.value,3)),o.setAttribute("radius",new t.Float32BufferAttribute(d.radius.value,1)),o.setAttribute("typeColor",new t.Float32BufferAttribute(d.typeColor.value,3)),a=new t.ShaderMaterial({uniforms:f,vertexShader:i,fragmentShader:s,transparent:!0}),a.extensions.fragDepth=!0;let m=null;const y=new t.Points(o,a);if(y.userData={indexLookup:v,materialShader:m},a.onBeforeCompile=e=>{e.uniforms.alpha={value:0},e.vertexShader=`uniform float alpha;\n${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",["vAlpha = alpha"].join("\n")),m=e,m.uniforms.alpha.value=.9,y.userData.materialShader=m},n.add(y),this.show_cones){const o={radius:{type:"fv1",value:[]},indices:{type:"iv1",value:[]},typeColor:{type:"c",value:[]},vertices:{type:"f",value:[]},normals:{type:"f",value:[]},uv:{type:"f",value:[]}},a={sphereTexture:{type:"t",value:h}},i=[new t.Vector2(.5,0),new t.Vector2(.5,1),new t.Vector2(.5,1)],s=new t.BufferGeometry;let u=0;Object.keys(e).forEach((n=>{if(-1!==e[n].parent){const a=this.generateCone(e[n],e[e[n].parent],r);let s=a.child.color;r&&(s=new t.Color(r));let c=a.parent.radius*this.radius_scale_factor;this.min_radius&&c<this.min_radius&&(c=this.min_radius);let l=a.child.radius*this.radius_scale_factor;this.min_radius&&l<this.min_radius&&(l=this.min_radius),o.vertices.value.push(a.child.vertex.x),o.vertices.value.push(a.child.vertex.y),o.vertices.value.push(a.child.vertex.z),o.radius.value.push(l),o.typeColor.value.push(s.r),o.typeColor.value.push(s.g),o.typeColor.value.push(s.b),o.normals.value.push(a.normal1.x),o.normals.value.push(a.normal1.y),o.normals.value.push(a.normal1.z),o.uv.value.push(i[0].x),o.uv.value.push(i[0].y),o.indices.value.push(u),u+=1,o.vertices.value.push(a.child.vertex.x),o.vertices.value.push(a.child.vertex.y),o.vertices.value.push(a.child.vertex.z),o.radius.value.push(l),o.typeColor.value.push(s.r),o.typeColor.value.push(s.g),o.typeColor.value.push(s.b),o.normals.value.push(a.normal2.x),o.normals.value.push(a.normal2.y),o.normals.value.push(a.normal2.z),o.uv.value.push(i[1].x),o.uv.value.push(i[1].y),o.indices.value.push(u),u+=1,o.vertices.value.push(a.parent.vertex.x),o.vertices.value.push(a.parent.vertex.y),o.vertices.value.push(a.parent.vertex.z),o.radius.value.push(c),o.typeColor.value.push(s.r),o.typeColor.value.push(s.g),o.typeColor.value.push(s.b),o.normals.value.push(a.normal2.x),o.normals.value.push(a.normal2.y),o.normals.value.push(a.normal2.z),o.uv.value.push(i[2].x),o.uv.value.push(i[2].y),o.indices.value.push(u),u+=1,s=a.parent.color,r&&(s=new t.Color(r)),o.vertices.value.push(a.parent.vertex.x),o.vertices.value.push(a.parent.vertex.y),o.vertices.value.push(a.parent.vertex.z),o.radius.value.push(c),o.typeColor.value.push(s.r),o.typeColor.value.push(s.g),o.typeColor.value.push(s.b),o.normals.value.push(a.normal1.x),o.normals.value.push(a.normal1.y),o.normals.value.push(a.normal1.z),o.uv.value.push(i[0].x),o.uv.value.push(i[0].y),o.indices.value.push(u),u+=1,o.vertices.value.push(a.parent.vertex.x),o.vertices.value.push(a.parent.vertex.y),o.vertices.value.push(a.parent.vertex.z),o.radius.value.push(c),o.typeColor.value.push(s.r),o.typeColor.value.push(s.g),o.typeColor.value.push(s.b),o.normals.value.push(a.normal2.x),o.normals.value.push(a.normal2.y),o.normals.value.push(a.normal2.z),o.uv.value.push(i[1].x),o.uv.value.push(i[1].y),o.indices.value.push(u),u+=1,o.vertices.value.push(a.child.vertex.x),o.vertices.value.push(a.child.vertex.y),o.vertices.value.push(a.child.vertex.z),o.radius.value.push(l),o.typeColor.value.push(s.r),o.typeColor.value.push(s.g),o.typeColor.value.push(s.b),o.normals.value.push(a.normal1.x),o.normals.value.push(a.normal1.y),o.normals.value.push(a.normal1.z),o.uv.value.push(i[2].x),o.uv.value.push(i[2].y),o.indices.value.push(u),u+=1}})),s.setIndex(new t.Uint32BufferAttribute(o.indices.value,1)),s.setAttribute("position",new t.Float32BufferAttribute(o.vertices.value,3)),s.setAttribute("radius",new t.Float32BufferAttribute(o.radius.value,1)),s.setAttribute("typeColor",new t.Float32BufferAttribute(o.typeColor.value,3)),s.setAttribute("normal",new t.Float32BufferAttribute(o.normals.value,3)),s.setAttribute("uv",new t.Float32BufferAttribute(o.uv.value,2));const p=new t.ShaderMaterial({uniforms:a,vertexShader:c,fragmentShader:l,transparent:!0,depthTest:!0,side:t.DoubleSide,alphaTest:.5});p.extensions.fragDepth=!0;const d=new t.Mesh(s,p);p.onBeforeCompile=e=>{e.uniforms.alpha={value:0},e.vertexShader=`uniform float alpha;\n${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",["vAlpha = alpha"].join("\n")),m=e,m.uniforms.alpha.value=.9,d.userData={materialShader:m}},n.add(d)}}else"sphere"===this.mode&&Object.keys(e).forEach((t=>{const r=this.generateSphere(e[t]);if(n.add(r),this.show_cones&&-1!==e[t].parent){const r=this.generateConeGeometry(e[t],e[e[t].parent]);n.add(r)}}));if("skeleton"===this.mode||!1===this.show_cones){a=new t.LineBasicMaterial({color:this.colors[this.colors.length-1]}),"skeleton"===this.mode&&a.color.set(this.colors[0]),o=new t.Geometry,Object.keys(e).forEach((r=>{if(-1!==e[r].parent){const n=function(e,r){return{child:new t.Vector3(e.x,e.y,e.z),parent:new t.Vector3(r.x,r.y,r.z)}}(e[r],e[e[r].parent]);o.vertices.push(n.child),o.vertices.push(n.parent)}}));const r=new t.LineSegments(o,a);n.add(r)}return n}addAxes(){const e=new t.WebGLRenderer({alpha:!0});e.setClearColor(0,0),e.setSize(200,200),this.axesRenderer=e;const r=this.dom_element.appendChild(e.domElement);r.setAttribute("id","axesCanvas"),r.style.width=200,r.style.height=200,r.style.position="absolute",r.style.zIndex=200,r.style.bottom="5px",r.style.right="5px";const n=new t.PerspectiveCamera(50,1,1,1e3);n.up=this.camera.up,this.axesCamera=n;const o=new t.Scene,a=new t.Vector3(0,0,0);o.add(new t.ArrowHelper(new t.Vector3(1,0,0),a,60,16711680,20,10)),o.add(new t.ArrowHelper(new t.Vector3(0,1,0),a,60,65280,20,10)),o.add(new t.ArrowHelper(new t.Vector3(0,0,1),a,60,255,20,10)),this.axesScene=o}init(){"noeffect"===this.effect&&(this.effect=!1),this.three_colors=[],Object.keys(this.colors).forEach((e=>{this.three_colors.push(new t.Color(this.colors[e]))})),this.three_materials=[],Object.keys(this.colors).forEach((e=>{this.three_materials.push(new t.MeshBasicMaterial({color:this.colors[e],wireframe:!1}))})),this.renderer=new t.WebGL1Renderer({antialias:!0}),this.renderer.setClearColor(this.backgroundColor,1),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.dom_element.appendChild(this.renderer.domElement),this.renderer.autoClear=!1,this.scene=new t.Scene,this.fov=45;const e=this.maxVolumeSize,r=2*e;if(this.camera=new t.PerspectiveCamera(this.fov,this.WIDTH/this.HEIGHT,10,r),this.showStats&&(this.stats=new o,this.stats.showPanel(0),this.stats.domElement.style.position="absolute",this.dom_element.style.position="relative",this.stats.domElement.style.top="0px",this.stats.domElement.style.zIndex=100,this.dom_element.appendChild(this.stats.dom)),this.camera.position.z=e,this.showAxes&&this.addAxes(),!0===this.flip&&this.camera.up.setY(-1),this.swc){const e=this.createNeuron(this.swc),t=u(this.swc),r=h(this.swc,t);e.isNeuron=!0,e.boundingSphere=r,this.scene.add(e)}if(this.sceneOnTopable=new t.Scene,this.metadata){const e=function(e,t){const r=document.createElement("div");r.id="node_key",r.style.position="absolute",r.style.top="0px",r.style.right="10px",r.style.border="solid 1px #aaaaaa",r.style.borderRadius="5px",r.style.padding="2px";let n="";return e.forEach((e=>{const r=parseInt(e.type,10),o=r<t.length?t[r]:t[0];let a=o;"string"!=typeof o&&(a=function(e){let t="#000000";return e>=0&&e<=15?t=`#00000${e.toString(16)}`:e>=16&&e<=255?t=`#0000${e.toString(16)}`:e>=256&&e<=4095?t=`#000${e.toString(16)}`:e>=4096&&e<=65535?t=`#00${e.toString(16)}`:e>=65536&&e<=1048575?t=`#0${e.toString(16)}`:e>=1048576&&e<=16777215&&(t=`#${e.toString(16)}`),t}(o)),n+=`<div><span style='height:10px;width:10px;background:${a};`,n+=`display:inline-block;'></span> : ${e.label}</div>`})),r.innerHTML=n,r}(this.metadata,this.colors);this.dom_element.appendChild(e)}this.trackControls=new a(this.camera,this.dom_element),this.trackControls.maxDistance=e,this.trackControls.minDistance=15,this.trackControls.addEventListener("change",this.render.bind(this)),this.trackControls.addEventListener("change",(()=>{if(this.cameraChangeCallback){const{position:e}=this.camera;this.cameraChangeCallback({x:e.x,y:e.y,z:e.z})}})),this.raycaster.params.Points.threshold=50,this.dom_element.addEventListener("click",this.onClick.bind(this),!0)}cameraCoords(){const{position:e}=this.camera;return{x:e.x,y:e.y,z:e.z}}cameraTarget(){const{target:e}=this.trackControls;return{x:e.x,y:e.y,z:e.z}}resetView(){this.trackControls.reset(),this.trackControls.update(),this.camera.up.set(0,this.flip?-1:1,0)}restoreView(e=0,t=0,r=0,n){this.trackControls.object.position.set(e,t,r),n&&this.trackControls.target.set(n.x,n.y,n.z),this.trackControls.update()}resetAroundFirstNeuron({frontToBack:e}={frontToBack:!0}){const t=this.scene.children.filter((e=>e.isNeuron));if(t.length>0){const r=t[0].boundingSphere.center,n=p(this.fov,t[0].boundingSphere,e,this.maxVolumeSize);this.trackControls.update(),this.trackControls.target.set(r.x,r.y,r.z),this.camera.position.set(n.x,n.y,n.z),this.camera.up.set(0,this.flip?-1:1,0)}}onClick(e){const r=this.dom_element.getBoundingClientRect(),n=new t.Vector2;n.x=(e.clientX-r.left)/this.WIDTH*2-1,n.y=-(e.clientY-r.top)/this.HEIGHT*2+1,this.raycaster.setFromCamera(n,this.camera);const o=this.raycaster.intersectObjects([].concat(this.scene.children,this.sceneOnTopable.children),!0).filter((e=>"Points"===e.object.type)).filter((e=>e.object.userData.materialShader.uniforms.alpha.value>0)).sort(((e,t)=>e.distanceToRay===t.distanceToRay?e.distance-t.distance:e.distanceToRay-t.distanceToRay));if(o.length>0){const t=o[0];if(e.altKey){if(this.on_toggle_node){const e=t.object.userData.indexLookup[t.index],r=t.object.parent.name;this.on_toggle_node(r,e)}}else if(e.shiftKey&&this.trackControls.clicked&&(this.trackControls.target=o[0].point),this.on_select_node){const r=t.object.userData.indexLookup[t.index],n=t.object.parent.name;this.on_select_node(n,r,e,o[0].point)}}}animate(e=null){this.stats&&this.stats.begin(),this.last_anim_timestamp?e-this.last_anim_timestamp>50&&(this.last_anim_timestamp=e,this.animated&&this.render(),this.trackControls.update(),this.showAxes&&(this.axesCamera.position.copy(this.camera.position),this.axesCamera.position.sub(this.trackControls.target),this.axesCamera.position.setLength(300),this.axesCamera.lookAt(this.axesScene.position))):(this.last_anim_timestamp=e,this.animated&&this.render()),this.stats&&this.stats.end(),window.requestAnimationFrame(this.animate.bind(this))}render(){this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.onTop&&this.renderer.clearDepth(),this.renderer.render(this.sceneOnTopable,this.camera),this.showAxes&&this.axesRenderer.render(this.axesScene,this.axesCamera)}loadNeuron(e,t,r,n=!0,o=!1,a=!1){const i=this.createNeuron(r,t),s=h(r,u(r)),c=s.center,l=p(this.fov,s,a,this.maxVolumeSize);n&&(this.trackControls.update(),this.trackControls.target.set(c.x,c.y,c.z),this.camera.position.set(l.x,l.y,l.z)),i.name=e,i.isNeuron=!0,i.boundingSphere=s,(o?this.sceneOnTopable:this.scene).add(i)}neuronLoaded(e,t=!1){return void 0!==(t?this.sceneOnTopable:this.scene).getObjectByName(e)}unloadNeuron(e,t=!1){const r=t?this.sceneOnTopable:this.scene,n=r.getObjectByName(e);r.remove(n)}setNeuronVisible(e,t,r=!1){const n=(r?this.sceneOnTopable:this.scene).getObjectByName(e);n&&(n.visible=t)}setNeuronDisplayLevel(e,t){if("particle"!==this.mode){const r=this.scene.getObjectByName(e);r&&r.children.forEach((e=>{e.userData.materialShader&&(e.userData.materialShader.uniforms.alpha.value=t)}))}}loadCompartment(e,r,n,o=!0){let a=(new t.OBJLoader).parse(n);a=d(a,r),a.name=e,this.scene.add(a),o&&this.centerCameraAroundCompartment(a),this.trackControls.update(),this.render()}loadCompartmentFromURL(e,r,n,o=!0){(new t.OBJLoader).load(n,(t=>{if(!this.scene.getObjectByName(e)){const n=d(t,r);n.name=e,this.scene.add(t),o&&this.centerCameraAroundCompartment(n)}}))}compartmentLoaded(e){return void 0!==this.scene.getObjectByName(e)}centerCameraAroundCompartment(e){const r=(new t.Box3).setFromObject(e);this.camera.position.set(r.min.x-10,r.min.y-10,r.min.z-10),this.trackControls.update();const n=r.getCenter();this.trackControls.target=n,this.render()}unloadCompartment(e){const t=this.scene.getObjectByName(e);this.scene.remove(t)}setCompartmentVisible(e,t){const r=this.scene.getObjectByName(e);r&&(r.visible=t)}setSize(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t),this.HEIGHT=t,this.WIDTH=e}setBackground(e){this.backgroundColor=e,this.renderer.setClearColor(this.backgroundColor,1)}}})(),sharkViewer=n})();
//# sourceMappingURL=shark_viewer.js.map