{"version":3,"sources":["webpack://sharkViewer/webpack/bootstrap","webpack://sharkViewer/external \"THREE\"","webpack://sharkViewer/./node_modules/three-obj-loader/dist/index.js","webpack://sharkViewer/./node_modules/three-orbit-controls/index.js","webpack://sharkViewer/./src/viewer/util.js","webpack://sharkViewer/./src/shark_viewer.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","THREE","defaultOnError","err","Error","OBJLoader","manager","this","undefined","DefaultLoadingManager","materials","regexp","vertex_pattern","normal_pattern","uv_pattern","face_vertex","face_vertex_uv","face_vertex_uv_normal","face_vertex_normal","object_pattern","smoothing_pattern","material_library_pattern","material_use_pattern","constructor","load","url","onLoad","onProgress","onError","scope","loader","FileLoader","setPath","path","text","parse","setMaterials","_createParserState","state","objects","vertices","normals","uvs","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","geometry","smooth","startMaterial","libraries","previous","inherited","groupCount","splice","index","material","length","mtllib","Array","isArray","groupStart","groupEnd","clone","cloned","push","end","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","len","parseInt","parseNormalIndex","parseUVIndex","addVertex","a","b","src","dst","addVertexLine","addNormal","addUV","addUVLine","addFace","ua","ub","uc","ud","na","nb","nc","nd","id","vLen","ia","ib","ic","uvLen","nLen","addLineGeometry","type","vi","uvi","debug","console","time","indexOf","replace","lines","split","line","lineFirstChar","lineSecondChar","result","trimLeft","trim","charAt","exec","parseFloat","lineParts","substring","lineVertices","lineUVs","li","llen","parts","substr","test","toLowerCase","container","Group","concat","isLine","buffergeometry","BufferGeometry","addAttribute","BufferAttribute","Float32Array","computeVertexNormals","mesh","createdMaterials","miLen","sourceMaterial","LineBasicMaterial","materialLine","copy","MeshPhongMaterial","shading","SmoothShading","FlatShading","addGroup","multiMaterial","MultiMaterial","LineSegments","Mesh","add","timeEnd","OrbitControls","domElement","offset","quat","quatInverse","lastPosition","lastQuaternion","document","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","STATE","NONE","Quaternion","setFromUnitVectors","up","inverse","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","panOffset","setFromSpherical","lookAt","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","window","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","v","panLeft","distance","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","pan","deltaX","deltaY","element","body","PerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","OrthographicCamera","right","left","clientWidth","top","bottom","warn","dollyIn","dollyScale","dollyOut","event","preventDefault","button","clientX","clientY","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","addEventListener","subVectors","x","y","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","sqrt","handleTouchStartDolly","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","EventDispatcher","defineProperties","center","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","swcParser","swcFile","swcAr","swcJSON","float","pattern","RegExp","join","forEach","e","match","z","parent","vertexShader","fragmentShader","vertexShaderCone","fragmentShaderCone","applySemiTransparentShader","color","traverse","child","ShaderMaterial","uniforms","Color","transparent","depthTest","depthWrite","side","DoubleSide","args","swc","flip","colors","radius_scale_factor","metadata","on_select_node","on_toggle_node","show_stats","animated","three","showAxes","show_cones","brainboundingbox","last_anim_timestamp","mouseHandler","nodeParticleTexture","min_radius","raycaster","Raycaster","trackControls","backgroundColor","renderer","camera","cameraChangeCallback","onTop","maxVolumeSize","setValues","dom_element","getElementById","HEIGHT","WIDTH","values","newValue","node","three_colors","sphereMaterial","three_materials","r1","SphereGeometry","nodeParent","coneMaterial","nodeVec","nodeParentVec","dist","distanceTo","cylAxis","normalize","acos","rotationAxis","crossVectors","r2","CylinderGeometry","matrixAutoUpdate","makeRotationAxis","setPosition","coneChild","coneParent","nodeColor","vertex","nodeParentColor","n1","n2","negate","normal1","normal2","neuron","Object3D","image","createElement","sphereImg","Texture","onload","needsUpdate","particleScale","getPixelRatio","customAttributes","typeColor","customUniforms","sphereTexture","indexLookup","particleVertex","generateParticle","g","sampleNumber","Float32BufferAttribute","extensions","fragDepth","materialShader","particles","Points","userData","onBeforeCompile","shader","alpha","coneAttributes","indices","uv","coneUniforms","coneGeom","ix21","cone","generateCone","parentRadius","childRadius","setIndex","Uint32BufferAttribute","alphaTest","coneMesh","sphere","generateSphere","generateConeGeometry","Geometry","generateSkeleton","effect","MeshBasicMaterial","wireframe","WebGLRenderer","antialias","setClearColor","setSize","appendChild","autoClear","scene","Scene","cameraPosition","farClipping","axes","AxisHelper","setY","createNeuron","sceneOnTopable","mElement","metadiv","style","border","borderRadius","padding","toinnerhtml","mtype","threeColor","cssColor","toString","convertToHexColor","label","innerHTML","createMetadataElement","render","pos","params","threshold","onClick","rect","getBoundingClientRect","mouse","setFromCamera","points","intersectObjects","children","filter","sort","distanceToRay","intersectObject","altKey","tracingId","shiftKey","point","timestamp","requestAnimationFrame","animate","clear","clearDepth","filename","nodes","updateCamera","onTopable","boundingSphere","boundingBox","rx","xmax","xmin","ry","ymax","ymin","rz","zmax","zmin","radiusSq","nodeCenter","nodeCenterToCenter","distSqNodeCenterToCenter","distNodeCenterToCenter","newRadius","nodeCenterToNewCenter","divideScalar","calculateBoundingSphere","calculateBoundingBox","sin","calculateCameraPosition","getObjectByName","remove","visible","opacity","geometryData","parsed","centerCameraAroundCompartment","URL","shadedObject","compartment","Box3","setFromObject","boxCenter","getCenter","selectedObj","width","height","aspect"],"mappings":"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,sDACA,uDACA,uFACA,2BACA,kEACA,uCACA,sEACA,yCACA,+DACA,2BACA,SACA,KACAP,KAAK,MAoCDQ,GAlC2B,CAC/B,+DACA,iCACA,mFACA,2BACA,yBACA,eACA,IACA,oCACA,0DACA,oDACA,oDACA,qCAEA,yCACA,uCACA,oDACA,kGACA,mDACA,4CACA,wDACA,kDACA,uFACA,2BACA,kEACA,uCACA,sEACA,yCACA,+DACA,2BACA,SACA,KACAR,KAAK,MAEkB,CACvB,0BACA,4BACA,uBACA,yBACA,2BACA,4BACA,eACA,IACA,8DACA,+CACA,wDACA,sFACA,mGACA,kEACA,+CACA,iDACA,kCACA,wBACA,2BACA,yFACA,6DACA,sCACA,uCACA,oEACA,6CACA,0BACA,0BACA,wBACA,cACA,cACA,kCACA,mEACA,2FACA,sGACA,oGACA,iGACA,+EACA,KACAA,KAAK,OAEDS,EAAqB,CACzB,+DACA,iCACA,uBACA,yBACA,2BACA,4BACA,eACA,IACA,4DACA,uCACA,8CACA,wDACA,yDACA,2BACA,0CACA,6CACA,yCACA,yCACA,kEACA,+DACA,2BACA,SACA,KACAT,KAAK,MA4GP,SAASU,EAA2BjX,EAAQkX,GAwC1C,OAvCAlX,EAAOmX,SAASC,IACdA,EAAMrT,SAAW,IAAIzD,EAAM+W,eAAe,CACxCC,SAAU,CACRJ,MAAO,CAAErQ,KAAM,IAAKtH,MAAO,IAAIe,EAAMiX,MAAM,GAAGL,OAEhDL,aAAc,qZAYdC,eAAgB,sjBAgBhBU,aAAa,EACbC,WAAW,EACXC,YAAY,EACZC,KAAMrX,EAAMsX,eAGT5X,EA+CM,MAAM,EAanB,YAAY6X,GACVjX,KAAKkX,IAAM,GAEXlX,KAAKnB,KAAO,WAEZmB,KAAKmX,MAAO,EAEZnX,KAAKoX,OAAS,CACZ,QACA,QACA,SACA,SACA,QACA,SACA,SACA,UAEFpX,KAAKqX,oBAAsB,EAC3BrX,KAAKsX,UAAW,EAChBtX,KAAKuX,eAAiB,KACtBvX,KAAKwX,eAAiB,KACtBxX,KAAKyX,YAAa,EAClBzX,KAAK0X,UAAW,EAChB1X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","file":"shark_viewer.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = THREE;","'use strict';\n\nfunction defaultOnError(err) {\n  throw new Error(err);\n}\n\nmodule.exports = function (THREE) {\n\n  /**\n   * @author mrdoob / http://mrdoob.com/\n   */\n\n  THREE.OBJLoader = function (manager) {\n\n    this.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager;\n\n    this.materials = null;\n\n    this.regexp = {\n      // v float float float\n      vertex_pattern: /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n      // vn float float float\n      normal_pattern: /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n      // vt float float\n      uv_pattern: /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n      // f vertex vertex vertex\n      face_vertex: /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\n      // f vertex/uv vertex/uv vertex/uv\n      face_vertex_uv: /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\n      // f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n      face_vertex_uv_normal: /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\n      // f vertex//normal vertex//normal vertex//normal\n      face_vertex_normal: /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\n      // o object_name | g group_name\n      object_pattern: /^[og]\\s*(.+)?/,\n      // s boolean\n      smoothing_pattern: /^s\\s+(\\d+|on|off)/,\n      // mtllib file_reference\n      material_library_pattern: /^mtllib /,\n      // usemtl material_name\n      material_use_pattern: /^usemtl /\n    };\n  };\n\n  THREE.OBJLoader.prototype = {\n\n    constructor: THREE.OBJLoader,\n\n    load: function load(url, onLoad, onProgress, onError) {\n\n      var scope = this;\n      this.onError = onError || defaultOnError;\n\n      var loader = new THREE.FileLoader(scope.manager);\n      loader.setPath(this.path);\n      loader.load(url, function (text) {\n\n        onLoad(scope.parse(text));\n      }, onProgress, onError);\n    },\n\n    setPath: function setPath(value) {\n\n      this.path = value;\n    },\n\n    setMaterials: function setMaterials(materials) {\n\n      this.materials = materials;\n    },\n\n    _createParserState: function _createParserState() {\n\n      var state = {\n        objects: [],\n        object: {},\n\n        vertices: [],\n        normals: [],\n        uvs: [],\n\n        materialLibraries: [],\n\n        startObject: function startObject(name, fromDeclaration) {\n\n          // If the current object (initial from reset) is not from a g/o declaration in the parsed\n          // file. We need to use it for the first parsed g/o to keep things in sync.\n          if (this.object && this.object.fromDeclaration === false) {\n\n            this.object.name = name;\n            this.object.fromDeclaration = fromDeclaration !== false;\n            return;\n          }\n\n          var previousMaterial = this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined;\n\n          if (this.object && typeof this.object._finalize === 'function') {\n\n            this.object._finalize(true);\n          }\n\n          this.object = {\n            name: name || '',\n            fromDeclaration: fromDeclaration !== false,\n\n            geometry: {\n              vertices: [],\n              normals: [],\n              uvs: []\n            },\n            materials: [],\n            smooth: true,\n\n            startMaterial: function startMaterial(name, libraries) {\n\n              var previous = this._finalize(false);\n\n              // New usemtl declaration overwrites an inherited material, except if faces were declared\n              // after the material, then it must be preserved for proper MultiMaterial continuation.\n              if (previous && (previous.inherited || previous.groupCount <= 0)) {\n\n                this.materials.splice(previous.index, 1);\n              }\n\n              var material = {\n                index: this.materials.length,\n                name: name || '',\n                mtllib: Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : '',\n                smooth: previous !== undefined ? previous.smooth : this.smooth,\n                groupStart: previous !== undefined ? previous.groupEnd : 0,\n                groupEnd: -1,\n                groupCount: -1,\n                inherited: false,\n\n                clone: function clone(index) {\n                  var cloned = {\n                    index: typeof index === 'number' ? index : this.index,\n                    name: this.name,\n                    mtllib: this.mtllib,\n                    smooth: this.smooth,\n                    groupStart: 0,\n                    groupEnd: -1,\n                    groupCount: -1,\n                    inherited: false\n                  };\n                  cloned.clone = this.clone.bind(cloned);\n                  return cloned;\n                }\n              };\n\n              this.materials.push(material);\n\n              return material;\n            },\n\n            currentMaterial: function currentMaterial() {\n\n              if (this.materials.length > 0) {\n                return this.materials[this.materials.length - 1];\n              }\n\n              return undefined;\n            },\n\n            _finalize: function _finalize(end) {\n\n              var lastMultiMaterial = this.currentMaterial();\n              if (lastMultiMaterial && lastMultiMaterial.groupEnd === -1) {\n\n                lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n                lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n                lastMultiMaterial.inherited = false;\n              }\n\n              // Ignore objects tail materials if no face declarations followed them before a new o/g started.\n              if (end && this.materials.length > 1) {\n\n                for (var mi = this.materials.length - 1; mi >= 0; mi--) {\n                  if (this.materials[mi].groupCount <= 0) {\n                    this.materials.splice(mi, 1);\n                  }\n                }\n              }\n\n              // Guarantee at least one empty material, this makes the creation later more straight forward.\n              if (end && this.materials.length === 0) {\n\n                this.materials.push({\n                  name: '',\n                  smooth: this.smooth\n                });\n              }\n\n              return lastMultiMaterial;\n            }\n          };\n\n          // Inherit previous objects material.\n          // Spec tells us that a declared material must be set to all objects until a new material is declared.\n          // If a usemtl declaration is encountered while this new object is being parsed, it will\n          // overwrite the inherited material. Exception being that there was already face declarations\n          // to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n          if (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\") {\n\n            var declared = previousMaterial.clone(0);\n            declared.inherited = true;\n            this.object.materials.push(declared);\n          }\n\n          this.objects.push(this.object);\n        },\n\n        finalize: function finalize() {\n\n          if (this.object && typeof this.object._finalize === 'function') {\n\n            this.object._finalize(true);\n          }\n        },\n\n        parseVertexIndex: function parseVertexIndex(value, len) {\n\n          var index = parseInt(value, 10);\n          return (index >= 0 ? index - 1 : index + len / 3) * 3;\n        },\n\n        parseNormalIndex: function parseNormalIndex(value, len) {\n\n          var index = parseInt(value, 10);\n          return (index >= 0 ? index - 1 : index + len / 3) * 3;\n        },\n\n        parseUVIndex: function parseUVIndex(value, len) {\n\n          var index = parseInt(value, 10);\n          return (index >= 0 ? index - 1 : index + len / 2) * 2;\n        },\n\n        addVertex: function addVertex(a, b, c) {\n\n          var src = this.vertices;\n          var dst = this.object.geometry.vertices;\n\n          dst.push(src[a + 0]);\n          dst.push(src[a + 1]);\n          dst.push(src[a + 2]);\n          dst.push(src[b + 0]);\n          dst.push(src[b + 1]);\n          dst.push(src[b + 2]);\n          dst.push(src[c + 0]);\n          dst.push(src[c + 1]);\n          dst.push(src[c + 2]);\n        },\n\n        addVertexLine: function addVertexLine(a) {\n\n          var src = this.vertices;\n          var dst = this.object.geometry.vertices;\n\n          dst.push(src[a + 0]);\n          dst.push(src[a + 1]);\n          dst.push(src[a + 2]);\n        },\n\n        addNormal: function addNormal(a, b, c) {\n\n          var src = this.normals;\n          var dst = this.object.geometry.normals;\n\n          dst.push(src[a + 0]);\n          dst.push(src[a + 1]);\n          dst.push(src[a + 2]);\n          dst.push(src[b + 0]);\n          dst.push(src[b + 1]);\n          dst.push(src[b + 2]);\n          dst.push(src[c + 0]);\n          dst.push(src[c + 1]);\n          dst.push(src[c + 2]);\n        },\n\n        addUV: function addUV(a, b, c) {\n\n          var src = this.uvs;\n          var dst = this.object.geometry.uvs;\n\n          dst.push(src[a + 0]);\n          dst.push(src[a + 1]);\n          dst.push(src[b + 0]);\n          dst.push(src[b + 1]);\n          dst.push(src[c + 0]);\n          dst.push(src[c + 1]);\n        },\n\n        addUVLine: function addUVLine(a) {\n\n          var src = this.uvs;\n          var dst = this.object.geometry.uvs;\n\n          dst.push(src[a + 0]);\n          dst.push(src[a + 1]);\n        },\n\n        addFace: function addFace(a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd) {\n\n          var vLen = this.vertices.length;\n\n          var ia = this.parseVertexIndex(a, vLen);\n          var ib = this.parseVertexIndex(b, vLen);\n          var ic = this.parseVertexIndex(c, vLen);\n          var id;\n\n          if (d === undefined) {\n\n            this.addVertex(ia, ib, ic);\n          } else {\n\n            id = this.parseVertexIndex(d, vLen);\n\n            this.addVertex(ia, ib, id);\n            this.addVertex(ib, ic, id);\n          }\n\n          if (ua !== undefined) {\n\n            var uvLen = this.uvs.length;\n\n            ia = this.parseUVIndex(ua, uvLen);\n            ib = this.parseUVIndex(ub, uvLen);\n            ic = this.parseUVIndex(uc, uvLen);\n\n            if (d === undefined) {\n\n              this.addUV(ia, ib, ic);\n            } else {\n\n              id = this.parseUVIndex(ud, uvLen);\n\n              this.addUV(ia, ib, id);\n              this.addUV(ib, ic, id);\n            }\n          }\n\n          if (na !== undefined) {\n\n            // Normals are many times the same. If so, skip function call and parseInt.\n            var nLen = this.normals.length;\n            ia = this.parseNormalIndex(na, nLen);\n\n            ib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\n            ic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\n\n            if (d === undefined) {\n\n              this.addNormal(ia, ib, ic);\n            } else {\n\n              id = this.parseNormalIndex(nd, nLen);\n\n              this.addNormal(ia, ib, id);\n              this.addNormal(ib, ic, id);\n            }\n          }\n        },\n\n        addLineGeometry: function addLineGeometry(vertices, uvs) {\n\n          this.object.geometry.type = 'Line';\n\n          var vLen = this.vertices.length;\n          var uvLen = this.uvs.length;\n\n          for (var vi = 0, l = vertices.length; vi < l; vi++) {\n\n            this.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\n          }\n\n          for (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\n\n            this.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\n          }\n        }\n\n      };\n\n      state.startObject('', false);\n\n      return state;\n    },\n\n    parse: function parse(text, debug) {\n      if (typeof debug === 'undefined') {\n        debug = true;\n      }\n\n      if (debug) {\n        console.time('OBJLoader');\n      }\n\n      var state = this._createParserState();\n\n      if (text.indexOf('\\r\\n') !== -1) {\n\n        // This is faster than String.split with regex that splits on both\n        text = text.replace(/\\r\\n/g, '\\n');\n      }\n\n      if (text.indexOf('\\\\\\n') !== -1) {\n\n        // join lines separated by a line continuation character (\\)\n        text = text.replace(/\\\\\\n/g, '');\n      }\n\n      var lines = text.split('\\n');\n      var line = '',\n          lineFirstChar = '',\n          lineSecondChar = '';\n      var lineLength = 0;\n      var result = [];\n\n      // Faster to just trim left side of the line. Use if available.\n      var trimLeft = typeof ''.trimLeft === 'function';\n\n      for (var i = 0, l = lines.length; i < l; i++) {\n\n        line = lines[i];\n\n        line = trimLeft ? line.trimLeft() : line.trim();\n\n        lineLength = line.length;\n\n        if (lineLength === 0) continue;\n\n        lineFirstChar = line.charAt(0);\n\n        // @todo invoke passed in handler if any\n        if (lineFirstChar === '#') continue;\n\n        if (lineFirstChar === 'v') {\n\n          lineSecondChar = line.charAt(1);\n\n          if (lineSecondChar === ' ' && (result = this.regexp.vertex_pattern.exec(line)) !== null) {\n\n            // 0                  1      2      3\n            // [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n            state.vertices.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n          } else if (lineSecondChar === 'n' && (result = this.regexp.normal_pattern.exec(line)) !== null) {\n\n            // 0                   1      2      3\n            // [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n            state.normals.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n          } else if (lineSecondChar === 't' && (result = this.regexp.uv_pattern.exec(line)) !== null) {\n\n            // 0               1      2\n            // [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\n\n            state.uvs.push(parseFloat(result[1]), parseFloat(result[2]));\n          } else {\n\n            this.onError(\"Unexpected vertex/normal/uv line: '\" + line + \"'\");\n          }\n        } else if (lineFirstChar === \"f\") {\n\n          if ((result = this.regexp.face_vertex_uv_normal.exec(line)) !== null) {\n\n            // f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n            // 0                        1    2    3    4    5    6    7    8    9   10         11         12\n            // [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\n\n            state.addFace(result[1], result[4], result[7], result[10], result[2], result[5], result[8], result[11], result[3], result[6], result[9], result[12]);\n          } else if ((result = this.regexp.face_vertex_uv.exec(line)) !== null) {\n\n            // f vertex/uv vertex/uv vertex/uv\n            // 0                  1    2    3    4    5    6   7          8\n            // [\"f 1/1 2/2 3/3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n            state.addFace(result[1], result[3], result[5], result[7], result[2], result[4], result[6], result[8]);\n          } else if ((result = this.regexp.face_vertex_normal.exec(line)) !== null) {\n\n            // f vertex//normal vertex//normal vertex//normal\n            // 0                     1    2    3    4    5    6   7          8\n            // [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n            state.addFace(result[1], result[3], result[5], result[7], undefined, undefined, undefined, undefined, result[2], result[4], result[6], result[8]);\n          } else if ((result = this.regexp.face_vertex.exec(line)) !== null) {\n\n            // f vertex vertex vertex\n            // 0            1    2    3   4\n            // [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\n\n            state.addFace(result[1], result[2], result[3], result[4]);\n          } else {\n\n            this.onError(\"Unexpected face line: '\" + line + \"'\");\n          }\n        } else if (lineFirstChar === \"l\") {\n\n          var lineParts = line.substring(1).trim().split(\" \");\n          var lineVertices = [],\n              lineUVs = [];\n\n          if (line.indexOf(\"/\") === -1) {\n\n            lineVertices = lineParts;\n          } else {\n\n            for (var li = 0, llen = lineParts.length; li < llen; li++) {\n\n              var parts = lineParts[li].split(\"/\");\n\n              if (parts[0] !== \"\") lineVertices.push(parts[0]);\n              if (parts[1] !== \"\") lineUVs.push(parts[1]);\n            }\n          }\n          state.addLineGeometry(lineVertices, lineUVs);\n        } else if ((result = this.regexp.object_pattern.exec(line)) !== null) {\n\n          // o object_name\n          // or\n          // g group_name\n\n          // WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n          // var name = result[ 0 ].substr( 1 ).trim();\n          var name = (\" \" + result[0].substr(1).trim()).substr(1);\n\n          state.startObject(name);\n        } else if (this.regexp.material_use_pattern.test(line)) {\n\n          // material\n\n          state.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\n        } else if (this.regexp.material_library_pattern.test(line)) {\n\n          // mtl file\n\n          state.materialLibraries.push(line.substring(7).trim());\n        } else if ((result = this.regexp.smoothing_pattern.exec(line)) !== null) {\n\n          // smooth shading\n\n          // @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n          // but does not define a usemtl for each face set.\n          // This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n          // This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n          // where explicit usemtl defines geometry groups.\n          // Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n          var value = result[1].trim().toLowerCase();\n          state.object.smooth = value === '1' || value === 'on';\n\n          var material = state.object.currentMaterial();\n          if (material) {\n\n            material.smooth = state.object.smooth;\n          }\n        } else {\n\n          // Handle null terminated files without exception\n          if (line === '\\0') continue;\n\n          this.onError(\"Unexpected line: '\" + line + \"'\");\n        }\n      }\n\n      state.finalize();\n\n      var container = new THREE.Group();\n      container.materialLibraries = [].concat(state.materialLibraries);\n\n      for (var i = 0, l = state.objects.length; i < l; i++) {\n\n        var object = state.objects[i];\n        var geometry = object.geometry;\n        var materials = object.materials;\n        var isLine = geometry.type === 'Line';\n\n        // Skip o/g line declarations that did not follow with any faces\n        if (geometry.vertices.length === 0) continue;\n\n        var buffergeometry = new THREE.BufferGeometry();\n\n        buffergeometry.addAttribute('position', new THREE.BufferAttribute(new Float32Array(geometry.vertices), 3));\n\n        if (geometry.normals.length > 0) {\n\n          buffergeometry.addAttribute('normal', new THREE.BufferAttribute(new Float32Array(geometry.normals), 3));\n        } else {\n\n          buffergeometry.computeVertexNormals();\n        }\n\n        if (geometry.uvs.length > 0) {\n\n          buffergeometry.addAttribute('uv', new THREE.BufferAttribute(new Float32Array(geometry.uvs), 2));\n        }\n\n        // Create materials\n\n        var createdMaterials = [];\n\n        for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n          var sourceMaterial = materials[mi];\n          var material = undefined;\n\n          if (this.materials !== null) {\n\n            material = this.materials.create(sourceMaterial.name);\n\n            // mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n            if (isLine && material && !(material instanceof THREE.LineBasicMaterial)) {\n\n              var materialLine = new THREE.LineBasicMaterial();\n              materialLine.copy(material);\n              material = materialLine;\n            }\n          }\n\n          if (!material) {\n\n            material = !isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial();\n            material.name = sourceMaterial.name;\n          }\n\n          material.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;\n\n          createdMaterials.push(material);\n        }\n\n        // Create mesh\n\n        var mesh;\n\n        if (createdMaterials.length > 1) {\n\n          for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n            var sourceMaterial = materials[mi];\n            buffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\n          }\n\n          var multiMaterial = new THREE.MultiMaterial(createdMaterials);\n          mesh = !isLine ? new THREE.Mesh(buffergeometry, multiMaterial) : new THREE.LineSegments(buffergeometry, multiMaterial);\n        } else {\n\n          mesh = !isLine ? new THREE.Mesh(buffergeometry, createdMaterials[0]) : new THREE.LineSegments(buffergeometry, createdMaterials[0]);\n        }\n\n        mesh.name = object.name;\n\n        container.add(mesh);\n      }\n\n      if (debug) {\n        console.timeEnd('OBJLoader');\n      }\n\n      return container;\n    }\n\n  };\n};","module.exports = function( THREE ) {\n\t/**\n\t * @author qiao / https://github.com/qiao\n\t * @author mrdoob / http://mrdoob.com\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author erich666 / http://erichaines.com\n\t */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\n\tfunction OrbitControls( object, domElement ) {\n\n\t\tthis.object = object;\n\n\t\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new THREE.Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.25;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t\t// Set to false to disable use of the keys\n\t\tthis.enableKeys = true;\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function() {\n\n\t\t\tvar offset = new THREE.Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\t\tvar quatInverse = quat.clone().inverse();\n\n\t\t\tvar lastPosition = new THREE.Vector3();\n\t\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\t\treturn function update () {\n\n\t\t\t\tvar position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t}\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t// restrict theta to be between desired limits\n\t\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t\t// move target to panned location\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function() {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tvar scope = this;\n\n\t\tvar changeEvent = { type: 'change' };\n\t\tvar startEvent = { type: 'start' };\n\t\tvar endEvent = { type: 'end' };\n\n\t\tvar STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\n\t\tvar state = STATE.NONE;\n\n\t\tvar EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tvar spherical = new THREE.Spherical();\n\t\tvar sphericalDelta = new THREE.Spherical();\n\n\t\tvar scale = 1;\n\t\tvar panOffset = new THREE.Vector3();\n\t\tvar zoomChanged = false;\n\n\t\tvar rotateStart = new THREE.Vector2();\n\t\tvar rotateEnd = new THREE.Vector2();\n\t\tvar rotateDelta = new THREE.Vector2();\n\n\t\tvar panStart = new THREE.Vector2();\n\t\tvar panEnd = new THREE.Vector2();\n\t\tvar panDelta = new THREE.Vector2();\n\n\t\tvar dollyStart = new THREE.Vector2();\n\t\tvar dollyEnd = new THREE.Vector2();\n\t\tvar dollyDelta = new THREE.Vector2();\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tvar panLeft = function() {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tvar panUp = function() {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 ); // get Y column of objectMatrix\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tvar pan = function() {\n\n\t\t\tvar offset = new THREE.Vector3();\n\n\t\t\treturn function pan ( deltaX, deltaY ) {\n\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tvar position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\t//console.log( 'handleMouseDownPan' );\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\t//console.log( 'handleMouseMovePan' );\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseUp( event ) {\n\n\t\t\t//console.log( 'handleMouseUp' );\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\t//console.log( 'handleMouseWheel' );\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\t//console.log( 'handleKeyDown' );\n\n\t\t\tswitch ( event.keyCode ) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate( event ) {\n\n\t\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly( event ) {\n\n\t\t\t//console.log( 'handleTouchStartDolly' );\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartPan( event ) {\n\n\t\t\t//console.log( 'handleTouchStartPan' );\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\t//console.log( 'handleTouchMoveDolly' );\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\t//console.log( 'handleTouchMovePan' );\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleTouchEnd( event ) {\n\n\t\t\t//console.log( 'handleTouchEnd' );\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( state === STATE.ROTATE ) {\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t} else if ( state === STATE.DOLLY ) {\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t} else if ( state === STATE.PAN ) {\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseUp( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\thandleMouseUp( event );\n\n\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( startEvent ); // not sure why these are here...\n\t\t\tscope.dispatchEvent( endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\t// two-fingered touch: dolly\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleTouchStartDolly( event );\n\n\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // two-fingered touch: dolly\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\n\n\t\t\t\t\thandleTouchMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchEnd( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\thandleTouchEnd( event );\n\n\t\t\tscope.dispatchEvent( endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\t\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\t\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t};\n\n\tOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\n\tOrbitControls.prototype.constructor = OrbitControls;\n\n\tObject.defineProperties( OrbitControls.prototype, {\n\n\t\tcenter: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\n\t\t\t\treturn this.target;\n\n\t\t\t}\n\n\t\t},\n\n\t\t// backward compatibility\n\n\t\tnoZoom: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\treturn ! this.enableZoom;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\tthis.enableZoom = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoRotate: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\treturn ! this.enableRotate;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\tthis.enableRotate = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoPan: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\treturn ! this.enablePan;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\tthis.enablePan = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoKeys: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\treturn ! this.enableKeys;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\tthis.enableKeys = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tstaticMoving : {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\treturn ! this.enableDamping;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\tthis.enableDamping = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdynamicDampingFactor : {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\treturn this.dampingFactor;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\tthis.dampingFactor = value;\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\treturn OrbitControls;\n};\n","// Convert swc file data into json object\nexport function swcParser(swcFile) {\n  // split by lines\n  const swcAr = swcFile.split(\"\\n\");\n  const swcJSON = {};\n\n  const float = \"-?\\\\d*(?:\\\\.\\\\d+)?\";\n  const pattern = new RegExp(\n    \"^[ \\\\t]*(\" +\n      [\n        \"\\\\d+\", // index\n        \"\\\\d+\", // type\n        float, // x\n        float, // y\n        float, // z\n        float, // radius\n        \"-1|\\\\d+\" // parent\n      ].join(\")[ \\\\t]+(\") +\n      \")[ \\\\t]*$\",\n    \"m\"\n  );\n\n  swcAr.forEach(e => {\n    // if line is good, put into json\n    const match = e.match(pattern);\n    if (match) {\n      const id = parseInt(match[1], 10);\n\n      swcJSON[id] = {\n        id,\n        type: parseInt(match[2], 10),\n        x: parseFloat(match[3]),\n        y: parseFloat(match[4]),\n        z: parseFloat(match[5]),\n        radius: parseFloat(match[6]),\n        parent: parseInt(match[7], 10)\n      };\n    }\n  });\n\n  // return json\n  return swcJSON;\n}\n\nexport const NODE_PARTICLE_IMAGE =\n  \"data:image/png;base64,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\";\n","import { NODE_PARTICLE_IMAGE, swcParser } from \"./viewer/util\";\n\nexport { swcParser };\n\nconst THREE = require(\"three\");\nrequire(\"three-obj-loader\")(THREE);\nconst OrbitControls = require(\"three-orbit-controls\")(THREE);\n\nconst DEFAULT_POINT_THRESHOLD = 50;\n\nconst vertexShader = [\n  \"uniform float particleScale;\",\n  \"attribute float radius;\",\n  \"attribute vec3 typeColor;\",\n  \"varying vec3 vColor;\",\n  \"varying vec4 mvPosition;\",\n  \"varying float vRadius;\",\n  \"void main() \",\n  \"{\",\n  \"vColor = vec3(typeColor); // set RGB color associated to vertex; use later in fragment shader.\",\n  \"mvPosition = modelViewMatrix * vec4(position, 1.0);\",\n\n  \"// gl_PointSize = size;\",\n  \"gl_PointSize = radius * ((particleScale*2.0) / length(mvPosition.z));\",\n  \"gl_Position = projectionMatrix * mvPosition;\",\n  \"vRadius = radius;\",\n  \"}\"\n].join(\"\\n\");\n\nconst fragmentShader = [\n  \"uniform sampler2D sphereTexture; // Imposter image of sphere\",\n  \"uniform mat4 projectionMatrix;\",\n  \"varying vec3 vColor; // colors associated to vertices; assigned by vertex shader\",\n  \"varying vec4 mvPosition;\",\n  \"varying float vRadius;\",\n  \"void main() \",\n  \"{\",\n  \"// what part of the sphere image?\",\n  \"vec2 uv = vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y);\",\n  \"vec4 sphereColors = texture2D(sphereTexture, uv);\",\n  \"// avoid further computation at invisible corners\",\n  \"if (sphereColors.a < 0.3) discard;\",\n\n  \"// calculates a color for the particle\",\n  \"// gl_FragColor = vec4(vColor, 1.0);\",\n  \"// sets a white particle texture to desired color\",\n  \"// gl_FragColor = sqrt(gl_FragColor * texture2D(sphereTexture, uv)) + vec4(0.1, 0.1, 0.1, 0.0);\",\n  \"// red channel contains colorizable sphere image\",\n  \"vec3 baseColor = vColor * sphereColors.r;\",\n  \"// green channel contains (white?) specular highlight\",\n  \"vec3 highlightColor = baseColor + sphereColors.ggg;\",\n  \"gl_FragColor = vec4(highlightColor, sphereColors.a);\",\n  \"// TODO blue channel contains depth offset, but we cannot use gl_FragDepth in webgl?\",\n  \"#ifdef GL_EXT_frag_depth\",\n  \"float far = gl_DepthRange.far; float near = gl_DepthRange.near;\",\n  \"float dz = sphereColors.b * vRadius;\",\n  \"vec4 clipPos = projectionMatrix * (mvPosition + vec4(0, 0, dz, 0));\",\n  \"float ndc_depth = clipPos.z/clipPos.w;\",\n  \"float depth = (((far-near) * ndc_depth) + near + far) / 2.0;\",\n  \"gl_FragDepthEXT = depth;\",\n  \"#endif\",\n  \"}\"\n].join(\"\\n\");\n\nconst fragmentShaderAnnotation = [\n  \"uniform sampler2D sphereTexture; // Imposter image of sphere\",\n  \"uniform mat4 projectionMatrix;\",\n  \"varying vec3 vColor; // colors associated to vertices; assigned by vertex shader\",\n  \"varying vec4 mvPosition;\",\n  \"varying float vRadius;\",\n  \"void main() \",\n  \"{\",\n  \"// what part of the sphere image?\",\n  \"vec2 uv = vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y);\",\n  \"vec4 sphereColors = texture2D(sphereTexture, uv);\",\n  \"// avoid further computation at invisible corners\",\n  \"if (sphereColors.a < 0.3) discard;\",\n\n  \"// calculates a color for the particle\",\n  \"// gl_FragColor = vec4(vColor, 1.0);\",\n  \"// sets a white particle texture to desired color\",\n  \"// gl_FragColor = sqrt(gl_FragColor * texture2D(sphereTexture, uv)) + vec4(0.1, 0.1, 0.1, 0.0);\",\n  \"// red channel contains colorizable sphere image\",\n  \"vec3 baseColor = vColor * sphereColors.r;\",\n  \"// green channel contains (white?) specular highlight\",\n  \"gl_FragColor = vec4(baseColor, sphereColors.a);\",\n  \"// TODO blue channel contains depth offset, but we cannot use gl_FragDepth in webgl?\",\n  \"#ifdef GL_EXT_frag_depth\",\n  \"float far = gl_DepthRange.far; float near = gl_DepthRange.near;\",\n  \"float dz = sphereColors.b * vRadius;\",\n  \"vec4 clipPos = projectionMatrix * (mvPosition + vec4(0, 0, dz, 0));\",\n  \"float ndc_depth = clipPos.z/clipPos.w;\",\n  \"float depth = (((far-near) * ndc_depth) + near + far) / 2.0;\",\n  \"gl_FragDepthEXT = depth;\",\n  \"#endif\",\n  \"}\"\n].join(\"\\n\");\n\nconst vertexShaderCone = [\n  \"attribute float radius;\",\n  \"attribute vec3 typeColor;\",\n  \"varying vec3 vColor;\",\n  \"varying vec2 sphereUv;\",\n  \"varying vec4 mvPosition;\",\n  \"varying float depthScale;\",\n  \"void main() \",\n  \"{\",\n  \"\t// TODO - offset cone position for different sphere sizes\",\n  \"\t// TODO - implement depth buffer on Chrome\",\n  \"\tmvPosition = modelViewMatrix * vec4(position, 1.0);\",\n  \"\t// Expand quadrilateral perpendicular to both view/screen direction and cone axis\",\n  \"\tvec3 cylAxis = (modelViewMatrix * vec4(normal, 0.0)).xyz; // convert cone axis to camera space\",\n  \"\tvec3 sideDir = normalize(cross(vec3(0.0,0.0,-1.0), cylAxis));\",\n  \"\tmvPosition += vec4(radius * sideDir, 0.0);\",\n  \"\tgl_Position = projectionMatrix * mvPosition;\",\n  \"\t// Pass and interpolate color\",\n  \"\tvColor = typeColor;\",\n  \"\t// Texture coordinates\",\n  \"\tsphereUv = uv - vec2(0.5, 0.5); // map from [0,1] range to [-.5,.5], before rotation\",\n  '\t// If sideDir is \"up\" on screen, make sure u is positive',\n  \"\tfloat q = sideDir.y * sphereUv.y;\",\n  \"\tsphereUv.y = sign(q) * sphereUv.y;\",\n  \"\t// rotate texture coordinates to match cone orientation about z\",\n  \"\tfloat angle = atan(sideDir.x/sideDir.y);\",\n  \"\tfloat c = cos(angle);\",\n  \"\tfloat s = sin(angle);\",\n  \"\tmat2 rotMat = mat2(\",\n  \"\t\tc, -s, \",\n  \"\t\ts,  c);\",\n  \"\tsphereUv = rotMat * sphereUv;\",\n  \"\tsphereUv += vec2(0.5, 0.5); // map back from [-.5,.5] => [0,1]\",\n  \"\t// We are painting an angled cone onto a flat quad, so depth correction is complicated\",\n  \"   float foreshortening = length(cylAxis) / length(cylAxis.xy); // correct depth for foreshortening\",\n  \"   // foreshortening limit is a tradeoff between overextruded cone artifacts, and depth artifacts\",\n  \"   if (foreshortening > 4.0) foreshortening = 0.9; // hack to not pop out at extreme angles...\",\n  \"   depthScale = radius * foreshortening; // correct depth for foreshortening\",\n  \"}\"\n].join(\"\\n\");\n\nconst fragmentShaderCone = [\n  \"uniform sampler2D sphereTexture; // Imposter image of sphere\",\n  \"uniform mat4 projectionMatrix;\",\n  \"varying vec3 vColor;\",\n  \"varying vec2 sphereUv;\",\n  \"varying vec4 mvPosition;\",\n  \"varying float depthScale;\",\n  \"void main() \",\n  \"{\",\n  \"\tvec4 sphereColors = texture2D(sphereTexture, sphereUv);\",\n  \"\tif (sphereColors.a < 0.3) discard;\",\n  \"\tvec3 baseColor = vColor * sphereColors.r;\",\n  \"\tvec3 highlightColor = baseColor + sphereColors.ggg;\",\n  \"\tgl_FragColor = vec4(highlightColor, sphereColors.a);\",\n  \"#ifdef GL_EXT_frag_depth\",\n  \"float dz = sphereColors.b * depthScale;\",\n  \"vec4 mvp = mvPosition + vec4(0, 0, dz, 0);\",\n  \"vec4 clipPos = projectionMatrix * mvp;\",\n  \"float ndc_depth = clipPos.z/clipPos.w;\",\n  \"float far = gl_DepthRange.far; float near = gl_DepthRange.near;\",\n  \"float depth = (((far-near) * ndc_depth) + near + far) / 2.0;\",\n  \"gl_FragDepthEXT = depth;\",\n  \"#endif\",\n  \"}\"\n].join(\"\\n\");\n\nfunction convertToHexColor(i) {\n  let result = \"#000000\";\n  if (i >= 0 && i <= 15) {\n    result = `#00000${i.toString(16)}`;\n  } else if (i >= 16 && i <= 255) {\n    result = `#0000${i.toString(16)}`;\n  } else if (i >= 256 && i <= 4095) {\n    result = `#000${i.toString(16)}`;\n  } else if (i >= 4096 && i <= 65535) {\n    result = `#00${i.toString(16)}`;\n  } else if (i >= 65536 && i <= 1048575) {\n    result = `#0${i.toString(16)}`;\n  } else if (i >= 1048576 && i <= 16777215) {\n    result = `#${i.toString(16)}`;\n  }\n  return result;\n}\n\nfunction calculateBoundingBox(swcJSON) {\n  const boundingBox = {\n    xmin: Infinity,\n    xmax: -Infinity,\n    ymin: Infinity,\n    ymax: -Infinity,\n    zmin: Infinity,\n    zmax: -Infinity\n  };\n\n  Object.values(swcJSON).forEach(node => {\n    const r = node.radius;\n    if (node.x - r < boundingBox.xmin) {\n      boundingBox.xmin = node.x - r;\n    }\n    if (node.x + r > boundingBox.xmax) {\n      boundingBox.xmax = node.x + r;\n    }\n    if (node.y - r < boundingBox.ymin) {\n      boundingBox.ymin = node.y - r;\n    }\n    if (node.y + r > boundingBox.ymax) {\n      boundingBox.ymax = node.y + r;\n    }\n    if (node.z - r < boundingBox.zmin) {\n      boundingBox.zmin = node.z - r;\n    }\n    if (node.z + r > boundingBox.zmax) {\n      boundingBox.zmax = node.z + r;\n    }\n  });\n\n  return boundingBox;\n}\n\nfunction calculateBoundingSphere(swcJSON, boundingBox) {\n  // Similar to:\n  // \"An Efficient Bounding Sphere\", by Jack Ritter from \"Graphics Gems\", Academic Press, 1990\n  // https://github.com/erich666/GraphicsGems/blob/master/gems/BoundSphere.c\n\n  // Start with the sphere inscribed in the bounding box.  It may miss some nodes.\n  const rx = (boundingBox.xmax - boundingBox.xmin) / 2;\n  const ry = (boundingBox.ymax - boundingBox.ymin) / 2;\n  const rz = (boundingBox.zmax - boundingBox.zmin) / 2;\n  let radius = Math.min(rx, ry, rz);\n  let center = new THREE.Vector3(\n    boundingBox.xmin + rx,\n    boundingBox.ymin + ry,\n    boundingBox.zmin + rz\n  );\n\n  // Find each node that is outside the current bounding sphere.\n  let radiusSq = radius * radius;\n  Object.values(swcJSON).forEach(node => {\n    const nodeCenter = new THREE.Vector3(node.x, node.y, node.z);\n    const nodeCenterToCenter = new THREE.Vector3();\n    nodeCenterToCenter.subVectors(center, nodeCenter);\n    const distSqNodeCenterToCenter = nodeCenterToCenter.dot(nodeCenterToCenter);\n    // Include the node's radius when checking whether it is outside.\n    if (distSqNodeCenterToCenter + node.radius * node.radius > radiusSq) {\n      // If it is outside, then the new boundingp-sphere radius is the average of the old radius\n      // and the distance from the outside of the node (i.e., include its radius) to the\n      // old bounding-sphere center.\n      const distNodeCenterToCenter = Math.sqrt(distSqNodeCenterToCenter);\n      const newRadius = (radius + (distNodeCenterToCenter + node.radius)) / 2.0;\n      // The new bounding sphere center will be on the line between the node and the old center.\n      const nodeCenterToCenterUnit = nodeCenterToCenter\n        .clone()\n        .divideScalar(distNodeCenterToCenter);\n      const nodeCenterToNewCenter = nodeCenterToCenterUnit\n        .clone()\n        .multiplyScalar(newRadius - node.radius);\n      center = nodeCenter.clone().add(nodeCenterToNewCenter);\n      radius = newRadius;\n      radiusSq = radius * radius;\n    }\n  });\n\n  return { center, radius };\n}\n\nfunction calculateCameraPosition(fov, boundingSphere) {\n  const theta = (fov * (Math.PI / 180.0)) / 2.0;\n  const d = boundingSphere.radius / Math.sin(theta);\n  const { center } = boundingSphere;\n  return new THREE.Vector3(center.x, center.y, center.z + d);\n}\n\nfunction applySemiTransparentShader(object, color) {\n  object.traverse(child => {\n    child.material = new THREE.ShaderMaterial({\n      uniforms: {\n        color: { type: \"c\", value: new THREE.Color(`${color}`) }\n      },\n      vertexShader: `\n        #line 585\n        varying vec3 normal_in_camera;\n        varying vec3 view_direction;\n\n        void main() {\n          vec4 pos_in_camera = modelViewMatrix * vec4(position, 1.0);\n          gl_Position = projectionMatrix * pos_in_camera;\n          normal_in_camera = normalize(mat3(modelViewMatrix) * normal);\n          view_direction = normalize(pos_in_camera.xyz);\n        }\n      `,\n      fragmentShader: `\n        #line 597\n        uniform vec3 color;\n        varying vec3 normal_in_camera;\n        varying vec3 view_direction;\n\n        void main() {\n          // Make edges more opaque than center\n          float edginess = 1.0 - abs(dot(normal_in_camera, view_direction));\n          float opacity = clamp(edginess - 0.30, 0.0, 0.5);\n          // Darken compartment at the very edge\n          float blackness = pow(edginess, 4.0) - 0.3;\n          vec3 c = mix(color, vec3(0,0,0), blackness);\n          gl_FragColor = vec4(c, opacity);\n        }\n      `,\n      transparent: true,\n      depthTest: true,\n      depthWrite: false,\n      side: THREE.DoubleSide\n    });\n  });\n  return object;\n}\n\n// generates particle vertices\nfunction generateParticle(node) {\n  return new THREE.Vector3(node.x, node.y, node.z);\n}\n\n// generates skeleton vertices\nfunction generateSkeleton(node, nodeParent) {\n  const vertex = new THREE.Vector3(node.x, node.y, node.z);\n  const vertexParent = new THREE.Vector3(\n    nodeParent.x,\n    nodeParent.y,\n    nodeParent.z\n  );\n  return {\n    child: vertex,\n    parent: vertexParent\n  };\n}\n\nfunction createMetadataElement(metadata, colors) {\n  const metadiv = document.createElement(\"div\");\n  metadiv.id = \"node_key\";\n  metadiv.style.position = \"absolute\";\n  metadiv.style.top = \"0px\";\n  metadiv.style.right = \"10px\";\n  metadiv.style.border = \"solid 1px #aaaaaa\";\n  metadiv.style.borderRadius = \"5px\";\n  metadiv.style.padding = \"2px\";\n\n  let toinnerhtml = \"\";\n  metadata.forEach(m => {\n    const mtype = parseInt(m.type, 10);\n    const threeColor = mtype < colors.length ? colors[mtype] : colors[0];\n    let cssColor = threeColor;\n    if (typeof threeColor !== \"string\")\n      cssColor = convertToHexColor(threeColor);\n    toinnerhtml += `<div><span style='height:10px;width:10px;background:${cssColor};`;\n    toinnerhtml += `display:inline-block;'></span> : ${m.label}</div>`;\n  });\n  metadiv.innerHTML = toinnerhtml;\n  return metadiv;\n}\n\n\nexport default class SharkViewer {\n  /* swc neuron json object:\n   *{\n   *  id : {\n   *    type: <type number of node (string)>,\n   *    x: <x position of node (float)>,\n   *    y: <y position of node (float)>,\n   *    z: <z position of node (float)>,\n   *    parent: <id number of node's parent (-1 if no parent)>,\n   *    radius: <radius of node (float)>,\n   *  }\n   *}\n   */\n  constructor(args) {\n    this.swc = {};\n    // mode (sphere, particle, skeleton)\n    this.mode = \"particle\";\n    // flip y axis\n    this.flip = false;\n    // color array, nodes of type 0 show as first color, etc.\n    this.colors = [\n      0x31ffdc,\n      0x6d4ff3,\n      0xaa3af0,\n      0xf38032,\n      0x59fc20,\n      0xf8d43c,\n      0xfd2c4d,\n      0xc9c9c9\n    ];\n    this.radius_scale_factor = 1;\n    this.metadata = false;\n    this.on_select_node = null;\n    this.on_toggle_node = null;\n    this.show_stats = false;\n    this.animated = false;\n    this.three = THREE;\n\n    this.showAxes = false;\n    this.show_cones = true;\n    this.brainboundingbox = null;\n    this.last_anim_timestamp = null;\n    this.mouseHandler = null;\n    this.nodeParticleTexture = NODE_PARTICLE_IMAGE;\n    this.min_radius = null;\n    this.raycaster = new THREE.Raycaster();\n    this.trackControls = null;\n    this.backgroundColor = 0xffffff;\n    this.renderer = null;\n    this.camera = null;\n    this.cameraChangeCallback = null;\n    this.onTop = false;\n    this.maxVolumeSize = 100000;\n\n    this.setValues(args);\n    // anything after the above line can not be set by the caller.\n\n    // html element that will receive webgl canvas\n    if (typeof args.dom_element === \"object\") {\n      this.dom_element = args.dom_element;\n    } else {\n      this.dom_element = document.getElementById(\n        args.dom_element || \"container\"\n      );\n    }\n\n    // height of canvas\n    this.HEIGHT = this.dom_element.clientHeight;\n    // width of canvas\n    this.WIDTH = this.dom_element.clientWidth;\n  }\n\n  // sets up user specified configuration\n  setValues(values) {\n    if (values !== undefined) {\n      Object.keys(values).forEach(key => {\n        const newValue = values[key];\n        if (newValue !== undefined) {\n          if (key in this) {\n            this[key] = newValue;\n          }\n        }\n      });\n    }\n  }\n\n  // calculates color based on node type\n  nodeColor(node) {\n    if (node.type < this.three_colors.length) {\n      return this.three_colors[node.type];\n    }\n    return this.three_colors[0];\n  }\n\n\n\n    // generates sphere mesh\n  generateSphere(node) {\n    const sphereMaterial = this.three_materials[node.type];\n    const r1 = node.radius || 0.01;\n    const geometry = new THREE.SphereGeometry(r1);\n    const mesh = new THREE.Mesh(geometry, sphereMaterial);\n    mesh.position.x = node.x;\n    mesh.position.y = node.y;\n    mesh.position.z = node.z;\n    return mesh;\n  }\n\n  // generates cones connecting spheres\n  generateConeGeometry(node, nodeParent) {\n    const coneMaterial = this.three_materials[nodeParent.type];\n    const nodeVec = new THREE.Vector3(node.x, node.y, node.z);\n    const nodeParentVec = new THREE.Vector3(\n      nodeParent.x,\n      nodeParent.y,\n      nodeParent.z\n    );\n    const dist = nodeVec.distanceTo(nodeParentVec);\n    const cylAxis = new THREE.Vector3().subVectors(nodeVec, nodeParentVec);\n    cylAxis.normalize();\n    const theta = Math.acos(cylAxis.y);\n    const rotationAxis = new THREE.Vector3();\n    rotationAxis.crossVectors(cylAxis, new THREE.Vector3(0, 1, 0));\n    rotationAxis.normalize();\n    const r1 = node.radius || 0.01;\n    const r2 = nodeParent.radius || 0.01;\n    const geometry = new THREE.CylinderGeometry(r1, r2, dist);\n    const mesh = new THREE.Mesh(geometry, coneMaterial);\n    mesh.matrixAutoUpdate = false;\n    mesh.matrix.makeRotationAxis(rotationAxis, -theta);\n    const position = new THREE.Vector3(\n      (node.x + nodeParent.x) / 2,\n      (node.y + nodeParent.y) / 2,\n      (node.z + nodeParent.z) / 2\n    );\n    mesh.matrix.setPosition(position);\n    return mesh;\n  }\n\n  // generates cone properties for node, parent pair\n  generateCone(node, nodeParent, color) {\n    const coneChild = {};\n    const coneParent = {};\n\n    let nodeColor = this.nodeColor(node);\n    if (color) {\n      nodeColor = new THREE.Color(color);\n    }\n    coneChild.vertex = new THREE.Vector3(node.x, node.y, node.z);\n    coneChild.radius = node.radius;\n    coneChild.color = nodeColor;\n\n    let nodeParentColor = this.nodeColor(nodeParent);\n    if (color) {\n      nodeParentColor = new THREE.Color(color);\n    }\n    coneParent.vertex = new THREE.Vector3(\n      nodeParent.x,\n      nodeParent.y,\n      nodeParent.z\n    );\n    coneParent.radius = nodeParent.radius;\n    coneParent.color = nodeParentColor;\n\n    // normals\n    const n1 = new THREE.Vector3().subVectors(\n      coneParent.vertex,\n      coneChild.vertex\n    );\n    const n2 = n1.clone().negate();\n\n    return {\n      child: coneChild,\n      parent: coneParent,\n      normal1: n1,\n      normal2: n2\n    };\n  }\n\n  createNeuron(swcJSON, color = undefined) {\n    // neuron is object 3d which ensures all components move together\n    const neuron = new THREE.Object3D();\n    let geometry;\n    let material;\n    // particle mode uses vertex info to place texture image, very fast\n    if (this.mode === \"particle\") {\n      // special imposter image contains:\n      // 1 - colorizable sphere image in red channel\n      // 2 - specular highlight in green channel\n      // 3 - depth offset in blue channel (currently unused)\n      const image = document.createElement(\"img\");\n      const sphereImg = new THREE.Texture(image);\n      image.onload = function onload() {\n        sphereImg.needsUpdate = true;\n      };\n      image.src = this.nodeParticleTexture;\n\n      geometry = new THREE.BufferGeometry();\n      // properties that may consty from particle to particle. only accessible in vertex shaders!\n      //\t(can pass color info to fragment shader via vColor.)\n      // compute scale for particles, in pixels\n      const particleScale =\n        (0.5 * this.HEIGHT) /\n        this.renderer.getPixelRatio() /\n        Math.tan((0.5 * this.fov * Math.PI) / 180.0);\n\n      const customAttributes = {\n        radius: { type: \"fv1\", value: [] },\n        typeColor: { type: \"c\", value: [] },\n        vertices: { type: \"f\", value: [] }\n      };\n\n      const customUniforms = {\n        particleScale: { type: \"f\", value: particleScale },\n        sphereTexture: { type: \"t\", value: sphereImg }\n      };\n\n      const indexLookup = {};\n\n      Object.keys(swcJSON).forEach(node => {\n        let nodeColor = this.nodeColor(swcJSON[node]);\n\n        if (color) {\n          nodeColor = new THREE.Color(color);\n        }\n\n        const particleVertex = generateParticle(swcJSON[node]);\n\n        let radius = swcJSON[node].radius * this.radius_scale_factor;\n\n        if (this.min_radius && radius < this.min_radius) {\n          radius = this.min_radius;\n        }\n\n        customAttributes.radius.value.push(radius);\n        customAttributes.typeColor.value.push(nodeColor.r);\n        customAttributes.typeColor.value.push(nodeColor.g);\n        customAttributes.typeColor.value.push(nodeColor.b);\n        customAttributes.vertices.value.push(particleVertex.x);\n        customAttributes.vertices.value.push(particleVertex.y);\n        customAttributes.vertices.value.push(particleVertex.z);\n\n        indexLookup[customAttributes.radius.value.length - 1] =\n          swcJSON[node].sampleNumber;\n     });\n      geometry.addAttribute(\n        \"position\",\n        new THREE.Float32BufferAttribute(customAttributes.vertices.value, 3)\n      );\n      geometry.addAttribute(\n        \"radius\",\n        new THREE.Float32BufferAttribute(customAttributes.radius.value, 1)\n      );\n      geometry.addAttribute(\n        \"typeColor\",\n        new THREE.Float32BufferAttribute(customAttributes.typeColor.value, 3)\n      );\n\n      material = new THREE.ShaderMaterial({\n        uniforms: customUniforms,\n        vertexShader,\n        fragmentShader,\n        transparent: true\n        // alphaTest: 0.5 // if having transparency issues, try including: alphaTest: 0.5,\n      });\n      material.extensions.fragDepth = true;\n\n      let materialShader = null;\n\n      const particles = new THREE.Points(geometry, material);\n      particles.userData = { indexLookup, materialShader };\n\n      material.onBeforeCompile = shader => {\n        shader.uniforms.alpha = { value: 0 };\n        shader.vertexShader = `uniform float alpha;\\n${shader.vertexShader}`;\n        shader.vertexShader = shader.vertexShader.replace(\n          \"#include <begin_vertex>\",\n          [\"vAlpha = alpha\"].join(\"\\n\")\n        );\n        materialShader = shader;\n\n        materialShader.uniforms.alpha.value = 0.9;\n\n        particles.userData.materialShader = materialShader;\n      };\n\n      neuron.add(particles);\n\n      if (this.show_cones) {\n        // Cone quad imposters, to link spheres together\n        const coneAttributes = {\n          radius: { type: \"fv1\", value: [] },\n          indices: { type: \"iv1\", value: [] },\n          typeColor: { type: \"c\", value: [] },\n          vertices: { type: \"f\", value: [] },\n          normals: { type: \"f\", value: [] },\n          uv: { type: \"f\", value: [] }\n        };\n        const coneUniforms = {\n          sphereTexture: { type: \"t\", value: sphereImg }\n        };\n        const uvs = [\n          new THREE.Vector2(0.5, 0),\n          new THREE.Vector2(0.5, 1),\n          new THREE.Vector2(0.5, 1)\n        ];\n        const coneGeom = new THREE.BufferGeometry();\n        let ix21 = 0;\n\n        Object.keys(swcJSON).forEach(node => {\n          if (swcJSON[node].parent !== -1) {\n            // Paint two triangles to make a cone-imposter quadrilateral\n            // Triangle #1\n            const cone = this.generateCone(\n              swcJSON[node],\n              swcJSON[swcJSON[node].parent],\n              color\n            );\n            let nodeColor = cone.child.color;\n            if (color) {\n              nodeColor = new THREE.Color(color);\n            }\n\n            let parentRadius = cone.parent.radius * this.radius_scale_factor;\n            if (this.min_radius && parentRadius < this.min_radius) {\n              parentRadius = this.min_radius;\n            }\n\n            let childRadius = cone.child.radius * this.radius_scale_factor;\n            if (this.min_radius && childRadius < this.min_radius) {\n              childRadius = this.min_radius;\n            }\n\n            // vertex 1\n            coneAttributes.vertices.value.push(cone.child.vertex.x);\n            coneAttributes.vertices.value.push(cone.child.vertex.y);\n            coneAttributes.vertices.value.push(cone.child.vertex.z);\n            coneAttributes.radius.value.push(childRadius);\n            coneAttributes.typeColor.value.push(nodeColor.r);\n            coneAttributes.typeColor.value.push(nodeColor.g);\n            coneAttributes.typeColor.value.push(nodeColor.b);\n            coneAttributes.normals.value.push(cone.normal1.x);\n            coneAttributes.normals.value.push(cone.normal1.y);\n            coneAttributes.normals.value.push(cone.normal1.z);\n            coneAttributes.uv.value.push(uvs[0].x);\n            coneAttributes.uv.value.push(uvs[0].y);\n            coneAttributes.indices.value.push(ix21);\n            ix21 += 1;\n\n            // vertex 2\n            coneAttributes.vertices.value.push(cone.child.vertex.x);\n            coneAttributes.vertices.value.push(cone.child.vertex.y);\n            coneAttributes.vertices.value.push(cone.child.vertex.z);\n            coneAttributes.radius.value.push(childRadius);\n            coneAttributes.typeColor.value.push(nodeColor.r);\n            coneAttributes.typeColor.value.push(nodeColor.g);\n            coneAttributes.typeColor.value.push(nodeColor.b);\n            coneAttributes.normals.value.push(cone.normal2.x);\n            coneAttributes.normals.value.push(cone.normal2.y);\n            coneAttributes.normals.value.push(cone.normal2.z);\n            coneAttributes.uv.value.push(uvs[1].x);\n            coneAttributes.uv.value.push(uvs[1].y);\n            coneAttributes.indices.value.push(ix21);\n            ix21 += 1;\n\n            // vertex 3\n            coneAttributes.vertices.value.push(cone.parent.vertex.x);\n            coneAttributes.vertices.value.push(cone.parent.vertex.y);\n            coneAttributes.vertices.value.push(cone.parent.vertex.z);\n            coneAttributes.radius.value.push(parentRadius);\n            coneAttributes.typeColor.value.push(nodeColor.r);\n            coneAttributes.typeColor.value.push(nodeColor.g);\n            coneAttributes.typeColor.value.push(nodeColor.b);\n            coneAttributes.normals.value.push(cone.normal2.x);\n            coneAttributes.normals.value.push(cone.normal2.y);\n            coneAttributes.normals.value.push(cone.normal2.z);\n            coneAttributes.uv.value.push(uvs[2].x);\n            coneAttributes.uv.value.push(uvs[2].y);\n            coneAttributes.indices.value.push(ix21);\n            ix21 += 1;\n\n            // Triangle #2\n            // Parent\n            nodeColor = cone.parent.color;\n            if (color) {\n              nodeColor = new THREE.Color(color);\n            }\n\n            // vertex 1\n            coneAttributes.vertices.value.push(cone.parent.vertex.x);\n            coneAttributes.vertices.value.push(cone.parent.vertex.y);\n            coneAttributes.vertices.value.push(cone.parent.vertex.z);\n            coneAttributes.radius.value.push(parentRadius);\n            coneAttributes.typeColor.value.push(nodeColor.r);\n            coneAttributes.typeColor.value.push(nodeColor.g);\n            coneAttributes.typeColor.value.push(nodeColor.b);\n            coneAttributes.normals.value.push(cone.normal1.x);\n            coneAttributes.normals.value.push(cone.normal1.y);\n            coneAttributes.normals.value.push(cone.normal1.z);\n            coneAttributes.uv.value.push(uvs[0].x);\n            coneAttributes.uv.value.push(uvs[0].y);\n            coneAttributes.indices.value.push(ix21);\n            ix21 += 1;\n\n            // vertex 2\n            coneAttributes.vertices.value.push(cone.parent.vertex.x);\n            coneAttributes.vertices.value.push(cone.parent.vertex.y);\n            coneAttributes.vertices.value.push(cone.parent.vertex.z);\n            coneAttributes.radius.value.push(parentRadius);\n            coneAttributes.typeColor.value.push(nodeColor.r);\n            coneAttributes.typeColor.value.push(nodeColor.g);\n            coneAttributes.typeColor.value.push(nodeColor.b);\n            coneAttributes.normals.value.push(cone.normal2.x);\n            coneAttributes.normals.value.push(cone.normal2.y);\n            coneAttributes.normals.value.push(cone.normal2.z);\n            coneAttributes.uv.value.push(uvs[1].x);\n            coneAttributes.uv.value.push(uvs[1].y);\n            coneAttributes.indices.value.push(ix21);\n            ix21 += 1;\n\n            // vertex 3\n            coneAttributes.vertices.value.push(cone.child.vertex.x);\n            coneAttributes.vertices.value.push(cone.child.vertex.y);\n            coneAttributes.vertices.value.push(cone.child.vertex.z);\n            coneAttributes.radius.value.push(childRadius);\n            coneAttributes.typeColor.value.push(nodeColor.r);\n            coneAttributes.typeColor.value.push(nodeColor.g);\n            coneAttributes.typeColor.value.push(nodeColor.b);\n            coneAttributes.normals.value.push(cone.normal1.x);\n            coneAttributes.normals.value.push(cone.normal1.y);\n            coneAttributes.normals.value.push(cone.normal1.z);\n            coneAttributes.uv.value.push(uvs[2].x);\n            coneAttributes.uv.value.push(uvs[2].y);\n            coneAttributes.indices.value.push(ix21);\n            ix21 += 1;\n          }\n        });\n        coneGeom.setIndex(\n          new THREE.Uint32BufferAttribute(coneAttributes.indices.value, 1)\n        );\n        coneGeom.addAttribute(\n          \"position\",\n          new THREE.Float32BufferAttribute(coneAttributes.vertices.value, 3)\n        );\n        coneGeom.addAttribute(\n          \"radius\",\n          new THREE.Float32BufferAttribute(coneAttributes.radius.value, 1)\n        );\n        coneGeom.addAttribute(\n          \"typeColor\",\n          new THREE.Float32BufferAttribute(coneAttributes.typeColor.value, 3)\n        );\n        coneGeom.addAttribute(\n          \"normal\",\n          new THREE.Float32BufferAttribute(coneAttributes.normals.value, 3)\n        );\n        coneGeom.addAttribute(\n          \"uv\",\n          new THREE.Float32BufferAttribute(coneAttributes.uv.value, 2)\n        );\n\n        const coneMaterial = new THREE.ShaderMaterial({\n          uniforms: coneUniforms,\n          vertexShader: vertexShaderCone,\n          fragmentShader: fragmentShaderCone,\n          transparent: true,\n          depthTest: true,\n          side: THREE.DoubleSide,\n          alphaTest: 0.5 // if having transparency issues, try including: alphaTest: 0.5,\n        });\n\n        coneMaterial.extensions.fragDepth = true;\n\n        const coneMesh = new THREE.Mesh(coneGeom, coneMaterial);\n\n        coneMaterial.onBeforeCompile = shader => {\n          // console.log( shader )\n          shader.uniforms.alpha = { value: 0 };\n          shader.vertexShader = `uniform float alpha;\\n${shader.vertexShader}`;\n          shader.vertexShader = shader.vertexShader.replace(\n            \"#include <begin_vertex>\",\n            [\"vAlpha = alpha\"].join(\"\\n\")\n          );\n          materialShader = shader;\n\n          materialShader.uniforms.alpha.value = 0.9;\n\n          coneMesh.userData = { materialShader };\n        };\n\n        neuron.add(coneMesh);\n      }\n    }\n    // sphere mode renders 3d sphere\n    else if (this.mode === \"sphere\") {\n      Object.keys(swcJSON).forEach(node => {\n        const sphere = this.generateSphere(swcJSON[node]);\n        neuron.add(sphere);\n        if (this.show_cones) {\n          if (swcJSON[node].parent !== -1) {\n            const cone = this.generateConeGeometry(\n              swcJSON[node],\n              swcJSON[swcJSON[node].parent]\n            );\n            neuron.add(cone);\n          }\n        }\n      });\n    }\n\n    if (this.mode === \"skeleton\" || this.show_cones === false) {\n      material = new THREE.LineBasicMaterial({\n        color: this.colors[this.colors.length - 1]\n      });\n      if (this.mode === \"skeleton\") material.color.set(this.colors[0]);\n      geometry = new THREE.Geometry();\n      Object.keys(swcJSON).forEach(node => {\n        if (swcJSON[node].parent !== -1) {\n          const vertices = generateSkeleton(\n            swcJSON[node],\n            swcJSON[swcJSON[node].parent]\n          );\n          geometry.vertices.push(vertices.child);\n          geometry.vertices.push(vertices.parent);\n        }\n      });\n      const line = new THREE.LineSegments(geometry, material);\n      neuron.add(line);\n    }\n    return neuron;\n  }\n\n  // Sets up three.js scene\n  init() {\n    if (this.effect === \"noeffect\") this.effect = false;\n\n    // set up colors and materials based on color array\n    this.three_colors = [];\n    Object.keys(this.colors).forEach(color => {\n      this.three_colors.push(new THREE.Color(this.colors[color]));\n    })\n    this.three_materials = [];\n    Object.keys(this.colors).forEach(color => {\n      this.three_materials.push(\n        new THREE.MeshBasicMaterial({\n          color: this.colors[color],\n          wireframe: false\n        })\n      );\n    });\n\n    // setup render\n    this.renderer = new THREE.WebGLRenderer({\n      antialias: true // to get smoother output\n    });\n    this.renderer.setClearColor(this.backgroundColor, 1);\n    this.renderer.setSize(this.WIDTH, this.HEIGHT);\n    this.dom_element.appendChild(this.renderer.domElement);\n\n    // to let on-top rendering work\n    this.renderer.autoClear = false;\n\n    // create a scene\n    this.scene = new THREE.Scene();\n\n    // put a camera in the scene\n    this.fov = 45;\n    const cameraPosition = this.maxVolumeSize;\n    const farClipping = cameraPosition * 2;\n    const nearClipping = 10;\n    this.camera = new THREE.PerspectiveCamera(\n      this.fov,\n      this.WIDTH / this.HEIGHT,\n      nearClipping,\n      farClipping\n    );\n\n    this.camera.position.z = cameraPosition;\n\n    if (this.showAxes) {\n      this.axes = new THREE.AxisHelper(this.showAxes);\n      this.scene.add(this.axes);\n    }\n\n    if (this.flip === true) {\n      this.camera.up.setY(-1);\n    }\n\n    const neuron = this.createNeuron(this.swc);\n    this.scene.add(neuron);\n\n    // for elements that may be rendered on top\n    this.sceneOnTopable = new THREE.Scene();\n\n    if (this.metadata) {\n      const mElement = createMetadataElement(this.metadata, this.colors);\n      this.dom_element.appendChild(mElement);\n    }\n\n    this.trackControls = new OrbitControls(this.camera, this.dom_element);\n    this.trackControls.maxDistance = cameraPosition;\n    this.trackControls.minDistance = 15;\n    this.trackControls.addEventListener(\"change\", this.render.bind(this));\n    // TODO: have a callback here that reports the current position of the\n    // camera. That way we can store it in the state and restore from there.\n    this.trackControls.addEventListener(\"change\", () => {\n      if (this.cameraChangeCallback) {\n        const { position: pos } = this.camera;\n        this.cameraChangeCallback({ x: pos.x, y: pos.y, z: pos.z });\n      }\n    });\n\n    this.raycaster.params.Points.threshold = DEFAULT_POINT_THRESHOLD;\n\n    this.dom_element.addEventListener(\"click\", this.onClick.bind(this), true);\n  }\n\n  cameraCoords() {\n    const { position: pos } = this.camera;\n    return { x: pos.x, y: pos.y, z: pos.z };\n  }\n\n  cameraTarget() {\n    const { target } = this.trackControls;\n    return {x: target.x, y: target.y, z: target.z };\n  }\n\n  resetView() {\n    this.trackControls.reset();\n    this.trackControls.update();\n  }\n\n  restoreView(x = 0, y = 0, z = 0, target) {\n    this.trackControls.object.position.set(x, y, z);\n    if (target) {\n      this.trackControls.target.set(target.x, target.y, target.z);\n    }\n    this.trackControls.update();\n  }\n\n  // TODO: alt click should target meshes and center the orbit controls\n  // on them if intersected.\n  onClick(event) {\n    const rect = this.dom_element.getBoundingClientRect();\n\n    const mouse = new THREE.Vector2();\n\n    mouse.x = ((event.clientX - rect.left) / this.WIDTH) * 2 - 1;\n    mouse.y = -((event.clientY - rect.top) / this.HEIGHT) * 2 + 1;\n\n    this.raycaster.setFromCamera(mouse, this.camera);\n\n    const intersects = this.raycaster.intersectObjects(\n      [].concat(this.scene.children, this.sceneOnTopable.children),\n      true\n    );\n\n    const points = intersects\n      .filter(o => o.object.type === \"Points\")\n      .filter(o => o.object.userData.materialShader.uniforms.alpha.value > 0.0)\n      .sort((a, b) =>\n        a.distanceToRay === b.distanceToRay\n          ? a.distance - b.distance\n          : a.distanceToRay - b.distanceToRay\n      );\n\n    if (points.length > 0) {\n      const intersectObject = points[0];\n\n      if (event.altKey) {\n        if (this.on_toggle_node) {\n          const sampleNumber =\n            intersectObject.object.userData.indexLookup[intersectObject.index];\n          const tracingId = intersectObject.object.parent.name;\n\n          this.on_toggle_node(tracingId, sampleNumber);\n        }\n      } else {\n        if (event.shiftKey) {\n          this.trackControls.target = points[0].point;\n        }\n\n        if (this.on_select_node) {\n          const sampleNumber =\n            intersectObject.object.userData.indexLookup[intersectObject.index];\n          const tracingId = intersectObject.object.parent.name;\n\n          this.on_select_node(tracingId, sampleNumber, event, points[0].point);\n        }\n      }\n    }\n  }\n\n  // animation loop\n  animate(timestamp = null) {\n    if (!this.last_anim_timestamp) {\n      this.last_anim_timestamp = timestamp;\n      if (this.animated) {\n        this.render();\n      }\n    } else if (timestamp - this.last_anim_timestamp > 50) {\n      this.last_anim_timestamp = timestamp;\n      if (this.animated) {\n        this.render();\n      }\n      this.trackControls.update();\n    }\n    window.requestAnimationFrame(this.animate.bind(this));\n  }\n\n  // render the scene\n  render() {\n    this.renderer.clear();\n    this.renderer.render(this.scene, this.camera);\n\n    if (this.onTop) {\n      this.renderer.clearDepth();\n    }\n\n    this.renderer.render(this.sceneOnTopable, this.camera);\n  }\n\n  // onTopable=true means that setValues({ onTop: true }) will make\n  // the neuron be rendered on top of (i.e., not occluded by) other neurons\n  // that had onTopable=false\n  loadNeuron(filename, color, nodes, updateCamera=true, onTopable=false) {\n    const neuron = this.createNeuron(nodes, color);\n    const boundingBox = calculateBoundingBox(nodes);\n    const boundingSphere = calculateBoundingSphere(nodes, boundingBox);\n    const target = boundingSphere.center;\n    const position = calculateCameraPosition(this.fov, boundingSphere);\n\n    if (updateCamera) {\n      this.trackControls.update();\n      this.trackControls.target.set(target.x, target.y, target.z);\n      this.camera.position.set(position.x, position.y, position.z);\n    }\n\n    neuron.name = filename;\n    const scene = onTopable ? this.sceneOnTopable : this.scene;\n    scene.add(neuron)\n  }\n\n  // use onTopable=true to correspond to loadNeuron(..., onTopable=true)\n  neuronLoaded(filename, onTopable=false) {\n    const scene = onTopable ? this.sceneOnTopable : this.scene;\n    return (scene.getObjectByName(filename) !== undefined);\n  }\n\n  // use onTopable=true to correspond to loadNeuron(..., onTopable=true)\n  unloadNeuron(filename, onTopable=false) {\n    const scene = onTopable ? this.sceneOnTopable : this.scene;\n    const neuron = scene.getObjectByName(filename);\n    scene.remove(neuron);\n  }\n\n  setNeuronVisible(id, visible, onTopable=false) {\n    const scene = onTopable ? this.sceneOnTopable : this.scene;\n    const neuron = scene.getObjectByName(id);\n    if (neuron) {\n      neuron.visible = visible;\n    }\n  }\n\n  // TODO: get this to work with the particle mode\n\n  setNeuronDisplayLevel(id, opacity) {\n    if (this.mode !== \"particle\") {\n      const neuron = this.scene.getObjectByName(id);\n\n      if (neuron) {\n        neuron.children.forEach(child => {\n          if (child.userData.materialShader) {\n            child.userData.materialShader.uniforms.alpha.value = opacity;\n          }\n        });\n      }\n    }\n  }\n\n  loadCompartment(id, color, geometryData, updateCamera=true) {\n    const loader = new THREE.OBJLoader();\n    let parsed = loader.parse(geometryData);\n    parsed = applySemiTransparentShader(parsed, color);\n    parsed.name = id;\n\n    this.scene.add(parsed);\n    if (updateCamera) {\n      this.centerCameraAroundCompartment(parsed);\n    }\n    this.trackControls.update();\n    this.render();\n  }\n\n  loadCompartmentFromURL(id, color, URL, updateCamera=true) {\n    const loader = new THREE.OBJLoader();\n\n    loader.load(URL, object => {\n      const exists = this.scene.getObjectByName(id);\n      if (!exists) {\n        const shadedObject = applySemiTransparentShader(object, color);\n        shadedObject.name = id;\n        this.scene.add(object);\n        if (updateCamera) {\n          this.centerCameraAroundCompartment(shadedObject);\n        }\n      }\n    });\n  }\n\n  compartmentLoaded(id) {\n    return (this.scene.getObjectByName(id) !== undefined);\n  }\n\n  centerCameraAroundCompartment(compartment) {\n    const boundingBox = new THREE.Box3().setFromObject(compartment);\n    this.camera.position.set(boundingBox.min.x - 10, boundingBox.min.y - 10, boundingBox.min.z - 10);\n    this.trackControls.update();\n    const boxCenter = boundingBox.getCenter();\n    this.trackControls.target = boxCenter;\n    this.render();\n  }\n\n  unloadCompartment(id) {\n    const selectedObj = this.scene.getObjectByName(id);\n    this.scene.remove(selectedObj);\n  }\n\n  setCompartmentVisible(id, visible) {\n    const compartment = this.scene.getObjectByName(id);\n\n    if (compartment) {\n      compartment.visible = visible;\n    }\n  }\n\n  setSize(width, height) {\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n\n    this.renderer.setSize(width, height);\n\n    this.HEIGHT = height;\n    this.WIDTH = width;\n  }\n\n  setBackground(color) {\n    this.backgroundColor = color;\n    this.renderer.setClearColor(this.backgroundColor, 1);\n  }\n}\n"],"sourceRoot":""}